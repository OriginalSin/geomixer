var Zepto=function(){function M(e){return e==null?String(e):x[T.call(e)]||"object"}function _(e){return M(e)=="function"}function D(e){return e!=null&&e==e.window}function P(e){return e!=null&&e.nodeType==e.DOCUMENT_NODE}function H(e){return M(e)=="object"}function B(e){return H(e)&&!D(e)&&Object.getPrototypeOf(e)==Object.prototype}function j(e){return typeof e.length=="number"}function F(e){return o.call(e,function(e){return e!=null})}function I(e){return e.length>0?n.fn.concat.apply([],e):e}function q(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function R(e){return e in f?f[e]:f[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function U(e,t){return typeof t=="number"&&!l[q(e)]?t+"px":t}function z(e){var t,n;return a[e]||(t=u.createElement(e),u.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),n=="none"&&(n="block"),a[e]=n),a[e]}function W(e){return"children"in e?s.call(e.children):n.map(e.childNodes,function(e){if(e.nodeType==1)return e})}function X(n,r,i){for(t in r)i&&(B(r[t])||O(r[t]))?(B(r[t])&&!B(n[t])&&(n[t]={}),O(r[t])&&!O(n[t])&&(n[t]=[]),X(n[t],r[t],i)):r[t]!==e&&(n[t]=r[t])}function V(e,t){return t==null?n(e):n(e).filter(t)}function $(e,t,n,r){return _(t)?t.call(e,n,r):t}function J(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function K(t,n){var r=t.className,i=r&&r.baseVal!==e;if(n===e)return i?r.baseVal:r;i?r.baseVal=n:t.className=n}function Q(e){var t;try{return e?e=="true"||(e=="false"?!1:e=="null"?null:!/^0/.test(e)&&!isNaN(t=Number(e))?t:/^[\[\{]/.test(e)?n.parseJSON(e):e):e}catch(r){return e}}function G(e,t){t(e);for(var n in e.childNodes)G(e.childNodes[n],t)}var e,t,n,r,i=[],s=i.slice,o=i.filter,u=window.document,a={},f={},l={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},c=/^\s*<(\w+|!)[^>]*>/,h=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,p=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,d=/^(?:body|html)$/i,v=/([A-Z])/g,m=["val","css","html","text","data","width","height","offset"],g=["after","prepend","before","append"],y=u.createElement("table"),b=u.createElement("tr"),w={tr:u.createElement("tbody"),tbody:y,thead:y,tfoot:y,td:b,th:b,"*":u.createElement("div")},E=/complete|loaded|interactive/,S=/^[\w-]*$/,x={},T=x.toString,N={},C,k,L=u.createElement("div"),A={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},O=Array.isArray||function(e){return e instanceof Array};return N.matches=function(e,t){if(!t||!e||e.nodeType!==1)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,s=!i;return s&&(i=L).appendChild(e),r=~N.qsa(i,t).indexOf(e),s&&L.removeChild(e),r},C=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},k=function(e){return o.call(e,function(t,n){return e.indexOf(t)==n})},N.fragment=function(t,r,i){var o,a,f;return h.test(t)&&(o=n(u.createElement(RegExp.$1))),o||(t.replace&&(t=t.replace(p,"<$1></$2>")),r===e&&(r=c.test(t)&&RegExp.$1),r in w||(r="*"),f=w[r],f.innerHTML=""+t,o=n.each(s.call(f.childNodes),function(){f.removeChild(this)})),B(i)&&(a=n(o),n.each(i,function(e,t){m.indexOf(e)>-1?a[e](t):a.attr(e,t)})),o},N.Z=function(e,t){return e=e||[],e.__proto__=n.fn,e.selector=t||"",e},N.isZ=function(e){return e instanceof N.Z},N.init=function(t,r){var i;if(!t)return N.Z();if(typeof t=="string"){t=t.trim();if(t[0]=="<"&&c.test(t))i=N.fragment(t,RegExp.$1,r),t=null;else{if(r!==e)return n(r).find(t);i=N.qsa(u,t)}}else{if(_(t))return n(u).ready(t);if(N.isZ(t))return t;if(O(t))i=F(t);else if(H(t))i=[t],t=null;else if(c.test(t))i=N.fragment(t.trim(),RegExp.$1,r),t=null;else{if(r!==e)return n(r).find(t);i=N.qsa(u,t)}}return N.Z(i,t)},n=function(e,t){return N.init(e,t)},n.extend=function(e){var t,n=s.call(arguments,1);return typeof e=="boolean"&&(t=e,e=n.shift()),n.forEach(function(n){X(e,n,t)}),e},N.qsa=function(e,t){var n,r=t[0]=="#",i=!r&&t[0]==".",o=r||i?t.slice(1):t,u=S.test(o);return P(e)&&u&&r?(n=e.getElementById(o))?[n]:[]:e.nodeType!==1&&e.nodeType!==9?[]:s.call(u&&!r?i?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},n.contains=function(e,t){return e!==t&&e.contains(t)},n.type=M,n.isFunction=_,n.isWindow=D,n.isArray=O,n.isPlainObject=B,n.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},n.inArray=function(e,t,n){return i.indexOf.call(t,e,n)},n.camelCase=C,n.trim=function(e){return e==null?"":String.prototype.trim.call(e)},n.uuid=0,n.support={},n.expr={},n.map=function(e,t){var n,r=[],i,s;if(j(e))for(i=0;i<e.length;i++)n=t(e[i],i),n!=null&&r.push(n);else for(s in e)n=t(e[s],s),n!=null&&r.push(n);return I(r)},n.each=function(e,t){var n,r;if(j(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(r in e)if(t.call(e[r],r,e[r])===!1)return e;return e},n.grep=function(e,t){return o.call(e,t)},window.JSON&&(n.parseJSON=JSON.parse),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){x["[object "+t+"]"]=t.toLowerCase()}),n.fn={forEach:i.forEach,reduce:i.reduce,push:i.push,sort:i.sort,indexOf:i.indexOf,concat:i.concat,map:function(e){return n(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return n(s.apply(this,arguments))},ready:function(e){return E.test(u.readyState)&&u.body?e(n):u.addEventListener("DOMContentLoaded",function(){e(n)},!1),this},get:function(t){return t===e?s.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(e){return i.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){return _(e)?this.not(this.not(e)):n(o.call(this,function(t){return N.matches(t,e)}))},add:function(e,t){return n(k(this.concat(n(e,t))))},is:function(e){return this.length>0&&N.matches(this[0],e)},not:function(t){var r=[];if(_(t)&&t.call!==e)this.each(function(e){t.call(this,e)||r.push(this)});else{var i=typeof t=="string"?this.filter(t):j(t)&&_(t.item)?s.call(t):n(t);this.forEach(function(e){i.indexOf(e)<0&&r.push(e)})}return n(r)},has:function(e){return this.filter(function(){return H(e)?n.contains(this,e):n(this).find(e).size()})},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!H(e)?e:n(e)},last:function(){var e=this[this.length-1];return e&&!H(e)?e:n(e)},find:function(e){var t,r=this;return typeof e=="object"?t=n(e).filter(function(){var e=this;return i.some.call(r,function(t){return n.contains(t,e)})}):this.length==1?t=n(N.qsa(this[0],e)):t=this.map(function(){return N.qsa(this,e)}),t},closest:function(e,t){var r=this[0],i=!1;typeof e=="object"&&(i=n(e));while(r&&!(i?i.indexOf(r)>=0:N.matches(r,e)))r=r!==t&&!P(r)&&r.parentNode;return n(r)},parents:function(e){var t=[],r=this;while(r.length>0)r=n.map(r,function(e){if((e=e.parentNode)&&!P(e)&&t.indexOf(e)<0)return t.push(e),e});return V(t,e)},parent:function(e){return V(k(this.pluck("parentNode")),e)},children:function(e){return V(this.map(function(){return W(this)}),e)},contents:function(){return this.map(function(){return s.call(this.childNodes)})},siblings:function(e){return V(this.map(function(e,t){return o.call(W(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return n.map(this,function(t){return t[e]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=z(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=_(e);if(this[0]&&!t)var r=n(e).get(0),i=r.parentNode||this.length>1;return this.each(function(s){n(this).wrapAll(t?e.call(this,s):i?r.cloneNode(!0):r)})},wrapAll:function(e){if(this[0]){n(this[0]).before(e=n(e));var t;while((t=e.children()).length)e=t.first();n(e).append(this)}return this},wrapInner:function(e){var t=_(e);return this.each(function(r){var i=n(this),s=i.contents(),o=t?e.call(this,r):e;s.length?s.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){n(this).replaceWith(n(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var r=n(this);(t===e?r.css("display")=="none":t)?r.show():r.hide()})},prev:function(e){return n(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return n(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return arguments.length===0?this.length>0?this[0].innerHTML:null:this.each(function(t){var r=this.innerHTML;n(this).empty().append($(this,e,t,r))})},text:function(t){return arguments.length===0?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t===e?"":""+t})},attr:function(n,r){var i;return typeof n=="string"&&r===e?this.length==0||this[0].nodeType!==1?e:n=="value"&&this[0].nodeName=="INPUT"?this.val():!(i=this[0].getAttribute(n))&&n in this[0]?this[0][n]:i:this.each(function(e){if(this.nodeType!==1)return;if(H(n))for(t in n)J(this,t,n[t]);else J(this,n,$(this,r,e,this.getAttribute(n)))})},removeAttr:function(e){return this.each(function(){this.nodeType===1&&J(this,e)})},prop:function(t,n){return t=A[t]||t,n===e?this[0]&&this[0][t]:this.each(function(e){this[t]=$(this,n,e,this[t])})},data:function(t,n){var r=this.attr("data-"+t.replace(v,"-$1").toLowerCase(),n);return r!==null?Q(r):e},val:function(e){return arguments.length===0?this[0]&&(this[0].multiple?n(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(t){this.value=$(this,e,t,this.value)})},offset:function(e){if(e)return this.each(function(t){var r=n(this),i=$(this,e,t,r.offset()),s=r.offsetParent().offset(),o={top:i.top-s.top,left:i.left-s.left};r.css("position")=="static"&&(o.position="relative"),r.css(o)});if(this.length==0)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,r){if(arguments.length<2){var i=this[0],s=getComputedStyle(i,"");if(!i)return;if(typeof e=="string")return i.style[C(e)]||s.getPropertyValue(e);if(O(e)){var o={};return n.each(O(e)?e:[e],function(e,t){o[t]=i.style[C(t)]||s.getPropertyValue(t)}),o}}var u="";if(M(e)=="string")!r&&r!==0?this.each(function(){this.style.removeProperty(q(e))}):u=q(e)+":"+U(e,r);else for(t in e)!e[t]&&e[t]!==0?this.each(function(){this.style.removeProperty(q(t))}):u+=q(t)+":"+U(t,e[t])+";";return this.each(function(){this.style.cssText+=";"+u})},index:function(e){return e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return e?i.some.call(this,function(e){return this.test(K(e))},R(e)):!1},addClass:function(e){return e?this.each(function(t){r=[];var i=K(this),s=$(this,e,t,i);s.split(/\s+/g).forEach(function(e){n(this).hasClass(e)||r.push(e)},this),r.length&&K(this,i+(i?" ":"")+r.join(" "))}):this},removeClass:function(t){return this.each(function(n){if(t===e)return K(this,"");r=K(this),$(this,t,n,r).split(/\s+/g).forEach(function(e){r=r.replace(R(e)," ")}),K(this,r.trim())})},toggleClass:function(t,r){return t?this.each(function(i){var s=n(this),o=$(this,t,i,K(this));o.split(/\s+/g).forEach(function(t){(r===e?!s.hasClass(t):r)?s.addClass(t):s.removeClass(t)})}):this},scrollTop:function(t){if(!this.length)return;var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})},scrollLeft:function(t){if(!this.length)return;var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})},position:function(){if(!this.length)return;var e=this[0],t=this.offsetParent(),r=this.offset(),i=d.test(t[0].nodeName)?{top:0,left:0}:t.offset();return r.top-=parseFloat(n(e).css("margin-top"))||0,r.left-=parseFloat(n(e).css("margin-left"))||0,i.top+=parseFloat(n(t[0]).css("border-top-width"))||0,i.left+=parseFloat(n(t[0]).css("border-left-width"))||0,{top:r.top-i.top,left:r.left-i.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||u.body;while(e&&!d.test(e.nodeName)&&n(e).css("position")=="static")e=e.offsetParent;return e})}},n.fn.detach=n.fn.remove,["width","height"].forEach(function(t){var r=t.replace(/./,function(e){return e[0].toUpperCase()});n.fn[t]=function(i){var s,o=this[0];return i===e?D(o)?o["inner"+r]:P(o)?o.documentElement["scroll"+r]:(s=this.offset())&&s[t]:this.each(function(e){o=n(this),o.css(t,$(this,i,e,o[t]()))})}}),g.forEach(function(e,t){var r=t%2;n.fn[e]=function(){var e,i=n.map(arguments,function(t){return e=M(t),e=="object"||e=="array"||t==null?t:N.fragment(t)}),s,o=this.length>1;return i.length<1?this:this.each(function(e,u){s=r?u:u.parentNode,u=t==0?u.nextSibling:t==1?u.firstChild:t==2?u:null,i.forEach(function(e){if(o)e=e.cloneNode(!0);else if(!s)return n(e).remove();G(s.insertBefore(e,u),function(e){e.nodeName!=null&&e.nodeName.toUpperCase()==="SCRIPT"&&(!e.type||e.type==="text/javascript")&&!e.src&&window.eval.call(window,e.innerHTML)})})})},n.fn[r?e+"To":"insert"+(t?"Before":"After")]=function(t){return n(t)[e](this),this}}),N.Z.prototype=n.fn,N.uniq=k,N.deserializeValue=Q,n.zepto=N,n}();window.Zepto=Zepto,window.$===undefined&&(window.$=Zepto),function(e){function c(e){return e._zid||(e._zid=t++)}function h(e,t,n,r){t=p(t);if(t.ns)var i=d(t.ns);return(o[c(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||i.test(e.ns))&&(!n||c(e.fn)===c(n))&&(!r||e.sel==r)})}function p(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function d(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function v(e,t){return e.del&&!a&&e.e in f||!!t}function m(e){return l[e]||a&&f[e]||e}function g(t,r,i,s,u,a,f){var h=c(t),d=o[h]||(o[h]=[]);r.split(/\s/).forEach(function(r){if(r=="ready")return e(document).ready(i);var o=p(r);o.fn=i,o.sel=u,o.e in l&&(i=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return o.fn.apply(this,arguments)}),o.del=a;var c=a||i;o.proxy=function(e){e=x(e);if(e.isImmediatePropagationStopped())return;e.data=s;var r=c.apply(t,e._args==n?[e]:[e].concat(e._args));return r===!1&&(e.preventDefault(),e.stopPropagation()),r},o.i=d.length,d.push(o),"addEventListener"in t&&t.addEventListener(m(o.e),o.proxy,v(o,f))})}function y(e,t,n,r,i){var s=c(e);(t||"").split(/\s/).forEach(function(t){h(e,t,n,r).forEach(function(t){delete o[s][t.i],"removeEventListener"in e&&e.removeEventListener(m(t.e),t.proxy,v(t,i))})})}function x(t,r){if(r||!t.isDefaultPrevented){r||(r=t),e.each(S,function(e,n){var i=r[e];t[e]=function(){return this[n]=b,i&&i.apply(r,arguments)},t[n]=w});if(r.defaultPrevented!==n?r.defaultPrevented:"returnValue"in r?r.returnValue===!1:r.getPreventDefault&&r.getPreventDefault())t.isDefaultPrevented=b}return t}function T(e){var t,r={originalEvent:e};for(t in e)!E.test(t)&&e[t]!==n&&(r[t]=e[t]);return x(r,e)}var t=1,n,r=Array.prototype.slice,i=e.isFunction,s=function(e){return typeof e=="string"},o={},u={},a="onfocusin"in window,f={focus:"focusin",blur:"focusout"},l={mouseenter:"mouseover",mouseleave:"mouseout"};u.click=u.mousedown=u.mouseup=u.mousemove="MouseEvents",e.event={add:g,remove:y},e.proxy=function(t,n){if(i(t)){var r=function(){return t.apply(n,arguments)};return r._zid=c(t),r}if(s(n))return e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,r){return this.on(e,t,n,r,1)};var b=function(){return!0},w=function(){return!1},E=/^([A-Z]|returnValue$|layer[XY]$)/,S={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,o,u,a,f){var l,c,h=this;if(t&&!s(t))return e.each(t,function(e,t){h.on(e,o,u,t,f)}),h;!s(o)&&!i(a)&&a!==!1&&(a=u,u=o,o=n);if(i(u)||u===!1)a=u,u=n;return a===!1&&(a=w),h.each(function(n,i){f&&(l=function(e){return y(i,e.type,a),a.apply(this,arguments)}),o&&(c=function(t){var n,s=e(t.target).closest(o,i).get(0);if(s&&s!==i)return n=e.extend(T(t),{currentTarget:s,liveFired:i}),(l||a).apply(s,[n].concat(r.call(arguments,1)))}),g(i,t,a,u,o,c||l)})},e.fn.off=function(t,r,o){var u=this;return t&&!s(t)?(e.each(t,function(e,t){u.off(e,r,t)}),u):(!s(r)&&!i(o)&&o!==!1&&(o=r,r=n),o===!1&&(o=w),u.each(function(){y(this,t,o,r)}))},e.fn.trigger=function(t,n){return t=s(t)||e.isPlainObject(t)?e.Event(t):x(t),t._args=n,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,n){var r,i;return this.each(function(o,u){r=T(s(t)?e.Event(t):t),r._args=n,r.target=u,e.each(h(u,t.type||t),function(e,t){i=t.proxy(r);if(r.isImmediatePropagationStopped())return!1})}),i},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.each(function(){try{this[t]()}catch(e){}}),this}}),e.Event=function(e,t){s(e)||(t=e,e=t.type);var n=document.createEvent(u[e]||"Events"),r=!0;if(t)for(var i in t)i=="bubbles"?r=!!t[i]:n[i]=t[i];return n.initEvent(e,r,!0),x(n)}}(Zepto),function($){function triggerAndReturn(e,t,n){var r=$.Event(t);return $(e).trigger(r,n),!r.isDefaultPrevented()}function triggerGlobal(e,t,n,r){if(e.global)return triggerAndReturn(t||document,n,r)}function ajaxStart(e){e.global&&$.active++===0&&triggerGlobal(e,null,"ajaxStart")}function ajaxStop(e){e.global&&!--$.active&&triggerGlobal(e,null,"ajaxStop")}function ajaxBeforeSend(e,t){var n=t.context;if(t.beforeSend.call(n,e,t)===!1||triggerGlobal(t,n,"ajaxBeforeSend",[e,t])===!1)return!1;triggerGlobal(t,n,"ajaxSend",[e,t])}function ajaxSuccess(e,t,n,r){var i=n.context,s="success";n.success.call(i,e,s,t),r&&r.resolveWith(i,[e,s,t]),triggerGlobal(n,i,"ajaxSuccess",[t,n,e]),ajaxComplete(s,t,n)}function ajaxError(e,t,n,r,i){var s=r.context;r.error.call(s,n,t,e),i&&i.rejectWith(s,[n,t,e]),triggerGlobal(r,s,"ajaxError",[n,r,e||t]),ajaxComplete(t,n,r)}function ajaxComplete(e,t,n){var r=n.context;n.complete.call(r,t,e),triggerGlobal(n,r,"ajaxComplete",[t,n]),ajaxStop(n)}function empty(){}function mimeToDataType(e){return e&&(e=e.split(";",2)[0]),e&&(e==htmlType?"html":e==jsonType?"json":scriptTypeRE.test(e)?"script":xmlTypeRE.test(e)&&"xml")||"text"}function appendQuery(e,t){return t==""?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function serializeData(e){e.processData&&e.data&&$.type(e.data)!="string"&&(e.data=$.param(e.data,e.traditional)),e.data&&(!e.type||e.type.toUpperCase()=="GET")&&(e.url=appendQuery(e.url,e.data),e.data=undefined)}function parseArguments(e,t,n,r){return $.isFunction(t)&&(r=n,n=t,t=undefined),$.isFunction(n)||(r=n,n=undefined),{url:e,data:t,success:n,dataType:r}}function serialize(e,t,n,r){var i,s=$.isArray(t),o=$.isPlainObject(t);$.each(t,function(t,u){i=$.type(u),r&&(t=n?r:r+"["+(o||i=="object"||i=="array"?t:"")+"]"),!r&&s?e.add(u.name,u.value):i=="array"||!n&&i=="object"?serialize(e,u,n,t):e.add(t,u)})}var jsonpID=0,document=window.document,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/;$.active=0,$.ajaxJSONP=function(e,t){if("type"in e){var n=e.jsonpCallback,r=($.isFunction(n)?n():n)||"jsonp"+ ++jsonpID,i=document.createElement("script"),s=window[r],o,u=function(e){$(i).triggerHandler("error",e||"abort")},a={abort:u},f;return t&&t.promise(a),$(i).on("load error",function(n,u){clearTimeout(f),$(i).off().remove(),n.type=="error"||!o?ajaxError(null,u||"error",a,e,t):ajaxSuccess(o[0],a,e,t),window[r]=s,o&&$.isFunction(s)&&s(o[0]),s=o=undefined}),ajaxBeforeSend(a,e)===!1?(u("abort"),a):(window[r]=function(){o=arguments},i.src=e.url.replace(/\?(.+)=\?/,"?$1="+r),document.head.appendChild(i),e.timeout>0&&(f=setTimeout(function(){u("timeout")},e.timeout)),a)}return $.ajax(e)},$.ajaxSettings={type:"GET",beforeSend:empty,success:empty,error:empty,complete:empty,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},$.ajax=function(options){var settings=$.extend({},options||{}),deferred=$.Deferred&&$.Deferred();for(key in $.ajaxSettings)settings[key]===undefined&&(settings[key]=$.ajaxSettings[key]);ajaxStart(settings),settings.crossDomain||(settings.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(settings.url)&&RegExp.$2!=window.location.host),settings.url||(settings.url=window.location.toString()),serializeData(settings),settings.cache===!1&&(settings.url=appendQuery(settings.url,"_="+Date.now()));var dataType=settings.dataType,hasPlaceholder=/\?.+=\?/.test(settings.url);if(dataType=="jsonp"||hasPlaceholder)return hasPlaceholder||(settings.url=appendQuery(settings.url,settings.jsonp?settings.jsonp+"=?":settings.jsonp===!1?"":"callback=?")),$.ajaxJSONP(settings,deferred);var mime=settings.accepts[dataType],headers={},setHeader=function(e,t){headers[e.toLowerCase()]=[e,t]},protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=settings.xhr(),nativeSetHeader=xhr.setRequestHeader,abortTimeout;deferred&&deferred.promise(xhr),settings.crossDomain||setHeader("X-Requested-With","XMLHttpRequest"),setHeader("Accept",mime||"*/*");if(mime=settings.mimeType||mime)mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),xhr.overrideMimeType&&xhr.overrideMimeType(mime);(settings.contentType||settings.contentType!==!1&&settings.data&&settings.type.toUpperCase()!="GET")&&setHeader("Content-Type",settings.contentType||"application/x-www-form-urlencoded");if(settings.headers)for(name in settings.headers)setHeader(name,settings.headers[name]);xhr.setRequestHeader=setHeader,xhr.onreadystatechange=function(){if(xhr.readyState==4){xhr.onreadystatechange=empty,clearTimeout(abortTimeout);var result,error=!1;if(xhr.status>=200&&xhr.status<300||xhr.status==304||xhr.status==0&&protocol=="file:"){dataType=dataType||mimeToDataType(settings.mimeType||xhr.getResponseHeader("content-type")),result=xhr.responseText;try{dataType=="script"?(1,eval)(result):dataType=="xml"?result=xhr.responseXML:dataType=="json"&&(result=blankRE.test(result)?null:$.parseJSON(result))}catch(e){error=e}error?ajaxError(error,"parsererror",xhr,settings,deferred):ajaxSuccess(result,xhr,settings,deferred)}else ajaxError(xhr.statusText||null,xhr.status?"error":"abort",xhr,settings,deferred)}};if(ajaxBeforeSend(xhr,settings)===!1)return xhr.abort(),ajaxError(null,"abort",xhr,settings,deferred),xhr;if(settings.xhrFields)for(name in settings.xhrFields)xhr[name]=settings.xhrFields[name];var async="async"in settings?settings.async:!0;xhr.open(settings.type,settings.url,async,settings.username,settings.password);for(name in headers)nativeSetHeader.apply(xhr,headers[name]);return settings.timeout>0&&(abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty,xhr.abort(),ajaxError(null,"timeout",xhr,settings,deferred)},settings.timeout)),xhr.send(settings.data?settings.data:null),xhr},$.get=function(){return $.ajax(parseArguments.apply(null,arguments))},$.post=function(){var e=parseArguments.apply(null,arguments);return e.type="POST",$.ajax(e)},$.getJSON=function(){var e=parseArguments.apply(null,arguments);return e.dataType="json",$.ajax(e)},$.fn.load=function(e,t,n){if(!this.length)return this;var r=this,i=e.split(/\s/),s,o=parseArguments(e,t,n),u=o.success;return i.length>1&&(o.url=i[0],s=i[1]),o.success=function(e){r.html(s?$("<div>").html(e.replace(rscript,"")).find(s):e),u&&u.apply(r,arguments)},$.ajax(o),this};var escape=encodeURIComponent;$.param=function(e,t){var n=[];return n.add=function(e,t){this.push(escape(e)+"="+escape(t))},serialize(n,e,t),n.join("&").replace(/%20/g,"+")}}(Zepto),function(e){e.fn.serializeArray=function(){var t=[],n;return e([].slice.call(this.get(0).elements)).each(function(){n=e(this);var r=n.attr("type");this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&r!="submit"&&r!="reset"&&r!="button"&&(r!="radio"&&r!="checkbox"||this.checked)&&t.push({name:n.attr("name"),value:n.val()})}),t},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(e){"__proto__"in{}||e.extend(e.zepto,{Z:function(t,n){return t=t||[],e.extend(t,e.fn),t.selector=n||"",t.__Z=!0,t},isZ:function(t){return e.type(t)==="array"&&"__Z"in t}});try{getComputedStyle(undefined)}catch(t){var n=getComputedStyle;window.getComputedStyle=function(e){try{return n(e)}catch(t){return null}}}}(Zepto)(function(e,t){typeof define=="function"&&define.amd?define([],t):typeof exports=="object"?module.exports=t():e.Handlebars=e.Handlebars||t()}(this,function(){var e=function(){"use strict";function t(e){this.string=e}var e;return t.prototype.toString=function(){return""+this.string},e=t,e}(),t=function(e){"use strict";function o(e){return r[e]}function u(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function c(e){return e instanceof n?e.toString():e==null?"":e?(e=""+e,s.test(e)?e.replace(i,o):e):e+""}function h(e){return!e&&e!==0?!0:l(e)&&e.length===0?!0:!1}function p(e,t){return(e?e+".":"")+t}var t={},n=e,r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,s=/[&<>"'`]/;t.extend=u;var a=Object.prototype.toString;t.toString=a;var f=function(e){return typeof e=="function"};f(/x/)&&(f=function(e){return typeof e=="function"&&a.call(e)==="[object Function]"});var f;t.isFunction=f;var l=Array.isArray||function(e){return e&&typeof e=="object"?a.call(e)==="[object Array]":!1};return t.isArray=l,t.escapeExpression=c,t.isEmpty=h,t.appendContextPath=p,t}(e),n=function(){"use strict";function n(e,n){var r;n&&n.firstLine&&(r=n.firstLine,e+=" - "+r+":"+n.firstColumn);var i=Error.prototype.constructor.call(this,e);for(var s=0;s<t.length;s++)this[t[s]]=i[t[s]];r&&(this.lineNumber=r,this.column=n.firstColumn)}var e,t=["description","fileName","lineNumber","message","name","number","stack"];return n.prototype=new Error,e=n,e}(),r=function(e,t){"use strict";function h(e,t){this.helpers=e||{},this.partials=t||{},p(this)}function p(e){e.registerHelper("helperMissing",function(){if(arguments.length===1)return undefined;throw new i("Missing helper: '"+arguments[arguments.length-1].name+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse,s=n.fn;if(t===!0)return s(this);if(t===!1||t==null)return i(this);if(a(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):i(this);if(n.data&&n.ids){var o=m(n.data);o.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:o}}return s(t,n)}),e.registerHelper("each",function(e,t){if(!t)throw new i("Must pass iterator to #each");var n=t.fn,s=t.inverse,o=0,u="",l,c;t.data&&t.ids&&(c=r.appendContextPath(t.data.contextPath,t.ids[0])+"."),f(e)&&(e=e.call(this)),t.data&&(l=m(t.data));if(e&&typeof e=="object")if(a(e))for(var h=e.length;o<h;o++)l&&(l.index=o,l.first=o===0,l.last=o===e.length-1,c&&(l.contextPath=c+o)),u+=n(e[o],{data:l});else for(var p in e)e.hasOwnProperty(p)&&(l&&(l.key=p,l.index=o,l.first=o===0,c&&(l.contextPath=c+p)),u+=n(e[p],{data:l}),o++);return o===0&&(u=s(this)),u}),e.registerHelper("if",function(e,t){return f(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||r.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){f(e)&&(e=e.call(this));var n=t.fn;if(!r.isEmpty(e)){if(t.data&&t.ids){var i=m(t.data);i.contextPath=r.appendContextPath(t.data.contextPath,t.ids[0]),t={data:i}}return n(e,t)}return t.inverse(this)}),e.registerHelper("log",function(t,n){var r=n.data&&n.data.level!=null?parseInt(n.data.level,10):1;e.log(r,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}var n={},r=e,i=t,s="2.0.0";n.VERSION=s;var o=6;n.COMPILER_REVISION=o;var u={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};n.REVISION_CHANGES=u;var a=r.isArray,f=r.isFunction,l=r.toString,c="[object Object]";n.HandlebarsEnvironment=h,h.prototype={constructor:h,logger:d,log:v,registerHelper:function(e,t){if(l.call(e)===c){if(t)throw new i("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){l.call(e)===c?r.extend(this.partials,e):this.partials[e]=t},unregisterPartial:function(e){delete this.partials[e]}};var d={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(d.level<=e){var n=d.methodMap[e];typeof console!="undefined"&&console[n]&&console[n].call(console,t)}}};n.logger=d;var v=d.log;n.log=v;var m=function(e){var t=r.extend({},e);return t._parent=e,t};return n.createFrame=m,n}(t,n),i=function(e,t,n){"use strict";function f(e){var t=e&&e[0]||1,n=o;if(t!==n){if(t<n){var r=u[n],i=u[t];throw new s("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new s("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function l(e,t){if(!t)throw new s("No environment passed to template");if(!e||!e.main)throw new s("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var n=function(n,r,o,u,a,f,l,c,h){a&&(u=i.extend({},u,a));var p=t.VM.invokePartial.call(this,n,o,u,f,l,c,h);if(p==null&&t.compile){var d={helpers:f,partials:l,data:c,depths:h};l[o]=t.compile(n,{data:c!==undefined,compat:e.compat},t),p=l[o](u,d)}if(p!=null){if(r){var v=p.split("\n");for(var m=0,g=v.length;m<g;m++){if(!v[m]&&m+1===g)break;v[m]=r+v[m]}p=v.join("\n")}return p}throw new s("The partial "+o+" could not be compiled when running in runtime-only mode")},r={lookup:function(e,t){var n=e.length;for(var r=0;r<n;r++)if(e[r]&&e[r][t]!=null)return e[r][t]},lambda:function(e,t){return typeof e=="function"?e.call(t):e},escapeExpression:i.escapeExpression,invokePartial:n,fn:function(t){return e[t]},programs:[],program:function(e,t,n){var r=this.programs[e],i=this.fn(e);return t||n?r=c(this,e,i,t,n):r||(r=this.programs[e]=c(this,e,i)),r},data:function(e,t){while(e&&t--)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=i.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler},o=function(t,n){n=n||{};var i=n.data;o._setup(n),!n.partial&&e.useData&&(i=d(t,i));var s;return e.useDepths&&(s=n.depths?[t].concat(n.depths):[t]),e.main.call(r,t,r.helpers,r.partials,i,s)};return o.isTop=!0,o._setup=function(n){n.partial?(r.helpers=n.helpers,r.partials=n.partials):(r.helpers=r.merge(n.helpers,t.helpers),e.usePartial&&(r.partials=r.merge(n.partials,t.partials)))},o._child=function(t,n,i){if(e.useDepths&&!i)throw new s("must pass parent depths");return c(r,t,e[t],n,i)},o}function c(e,t,n,r,i){var s=function(t,s){return s=s||{},n.call(e,t,e.helpers,e.partials,s.data||r,i&&[t].concat(i))};return s.program=t,s.depth=i?i.length:0,s}function h(e,t,n,r,i,o,u){var a={partial:!0,helpers:r,partials:i,data:o,depths:u};if(e===undefined)throw new s("The partial "+t+" could not be found");if(e instanceof Function)return e(n,a)}function p(){return""}function d(e,t){if(!t||!("root"in t))t=t?a(t):{},t.root=e;return t}var r={},i=e,s=t,o=n.COMPILER_REVISION,u=n.REVISION_CHANGES,a=n.createFrame;return r.checkRevision=f,r.template=l,r.program=c,r.invokePartial=h,r.noop=p,r}(t,n,r),s=function(e,t,n,r,i){"use strict";var s,o=e,u=t,a=n,f=r,l=i,c=function(){var e=new o.HandlebarsEnvironment;return f.extend(e,o),e.SafeString=u,e.Exception=a,e.Utils=f,e.escapeExpression=f.escapeExpression,e.VM=l,e.template=function(t){return l.template(t,e)},e},h=c();return h.create=c,h["default"]=h,s=h,s}(r,e,n,t,i);return s})),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?null:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,0,t):e[0]},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,Math.max(e.length-t,0)):e[e.length-1]},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s},x.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return t.length===0&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]==null&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if(i=="[object Array]"){o=e.length,u=o==t.length;if(u)while(o--)if(!(u=O(e[o],t[o],n,r)))break}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)){o++;if(!(u=x.has(t,c)&&O(e[c],t[c],n,r)))break}if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return O(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(e);for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var _={escape:new RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(_[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(e==null)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(x,e))}})};var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(B,function(e){return"\\"+H[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var j=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.1.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeningTo;if(!r)return this;var i=!t&&!n;!n&&typeof t=="object"&&(n=this),e&&((r={})[e._listenId]=e);for(var s in r)e=r[s],e.off(t,n,this),(i||u.isEmpty(e._events))&&delete this._listeningTo[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeningTo||(this._listeningTo={}),s=t._listenId||(t._listenId=u.uniqueId("l"));return i[s]=t,!r&&typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=u.defaults({},n,u.result(this,"defaults")),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},F(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t,n=u.extend({validate:!0},n);if(r&&!n.wait){if(!this.set(r,n))return!1}else if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},F(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;F(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||j();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t,{validationError:n})),!1):!0}});var d=["keys","values","pairs","invert","pick","omit"];u.each(d,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var v=o.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};u.extend(v.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.extend({merge:!1},t,g))},remove:function(e,t){var n=!u.isArray(e);e=n?[e]:u.clone(e),t||(t={});var r,i,s,o;for(r=0,i=e.length;r<i;r++){o=e[r]=this.get(e[r]);if(!o)continue;delete this._byId[o.id],delete this._byId[o.cid],s=this.indexOf(o),this.models.splice(s,1),this.length--,t.silent||(t.index=s,o.trigger("remove",o,this,t)),this._removeReference(o)}return n?e[0]:e},set:function(e,t){t=u.defaults({},t,m),t.parse&&(e=this.parse(e,t));var n=!u.isArray(e);e=n?e?[e]:[]:u.clone(e);var r,i,s,o,a,f,l,c=t.at,h=this.model,d=this.comparator&&c==null&&t.sort!==!1,v=u.isString(this.comparator)?this.comparator:null,g=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!d&&w&&S?[]:!1;for(r=0,i=e.length;r<i;r++){a=e[r],a instanceof p?s=o=a:s=a[h.prototype.idAttribute];if(f=this.get(s))S&&(b[f.cid]=!0),E&&(a=a===o?o.attributes:a,t.parse&&(a=f.parse(a,t)),f.set(a,t),d&&!l&&f.hasChanged(v)&&(l=!0)),e[r]=f;else if(w){o=e[r]=this._prepareModel(a,t);if(!o)continue;g.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o)}x&&x.push(f||o)}if(S){for(r=0,i=this.length;r<i;++r)b[(o=this.models[r]).cid]||y.push(o);y.length&&this.remove(y,t)}if(g.length||x&&x.length){d&&(l=!0),this.length+=g.length;if(c!=null)for(r=0,i=g.length;r<i;r++)this.models.splice(c+r,0,g[r]);else{x&&(this.models.length=0);var T=x||g;for(r=0,i=T.length;r<i;r++)this.models.push(T[r])}}l&&this.sort({silent:!0});if(!t.silent){for(r=0,i=g.length;r<i;r++)(o=g[r]).trigger("add",o,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return n?e[0]:e},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),e=this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,u.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,u.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return i.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e.id]||this._byId[e.cid]||this._byId[e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},F(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(e,t,i){i.wait&&n.add(e,i),r&&r(e,t,i)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t=t?u.clone(t):{},t.collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(y,function(e){v.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var b=["groupBy","countBy","sortBy"];u.each(b,function(e){v.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var w=o.View=function(e){this.cid=u.uniqueId("view"),e||(e={}),u.extend(this,u.pick(e,S)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},E=/^(\S+)\s*(.*)$/,S=["model","collection","el","id","attributes","className","tagName","events"];u.extend(w.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(E),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||j()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&x&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var x=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/,H=/[?#].*$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search))}if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),u.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(H,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var B=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=v.extend=N.extend=w.extend=O.extend=B;var j=function(){throw new Error('A "url" property or function must be specified')},F=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),function(){function c(e){var t=e._constructorArg;e._referenceCount=0,e._objectOptionsByCid={},e._boundDataObjectsByCid={},_.each(w,function(t){e[t.name]=[]}),e.children={},e._renderCount=0,t&&_.extend(e,t),h(e),_.each(w,function(t){t.configure&&t.configure(e)}),e.trigger("configure")}function h(e){e.helpers&&_.each(e.helpers,function(t,n){e.helpers[n]=function(){var n=_.toArray(arguments),r=_.last(n);return r.context=this,t.apply(e,n)}})}function p(e){return'Error "'+e+'". For more information visit http://thoraxjs.org/error-codes.html'+"#"+e}function d(e,t){var n=new Error(p(e));return n.name=e,n.info=t,n}function v(e,t){var n=e.extend;e.extend=function(){var e=n.apply(this,arguments);return e.prototype.name&&(t[e.prototype.name]=e),e}}function m(e,t,n,r){var i=e[t],s;if(_.indexOf(n,".")>=0){var o=n.split(/\./);n=o.pop(),_.each(o,function(e){i=i[e]})}i&&(s=i[n]);if(!s&&!r)throw new Error(t+": "+n+" does not exist.");return s}function g(e,t,n){var r;_.isString(e[t])?r=l.Util.getViewClass(e[t],!0):e.name&&!_.isFunction(e[t])&&(r=l.Util.getViewClass(e.name+(n.extension||""),!0)),r&&!_.isFunction(e[t])&&(e[t]=r);if(n.required&&!_.isFunction(e[t]))throw new Error("View "+(e.name||e.cid)+" requires: "+t)}function y(e,t,n){var r;_.isString(e[t])?r=l.Util.getTemplate(e[t],!0):e.name&&!_.isFunction(e[t])&&(r=l.Util.getTemplate(e.name+(n.extension||""),!0)),!r&&t==="template"&&e._defaultTemplate&&(r=e._defaultTemplate),r&&!_.isFunction(e[t])&&(e[t]=r);if(n.required&&!_.isFunction(e[t])){var i=new Error("view-requires: "+t);throw i.info={name:e.name||e.cid,parent:e.parent&&(e.parent.name||e.parent.cid),helperName:e._helperName},i}}function b(e,t,n){return t=e&&e[t],t&&t.call?t.call(n||e):t}function E(e){_.each(w,function(t){e[t.name]||(e[t.name]=[])})}function S(e){_.each(w,function(t){e[t.name]=[]})}function x(e,t,n,r){var i=[];_.has(e,t)&&i.push(e);var s=e;if(n)while(s=s.__parent__)_.has(s,t)&&i.push(s);else{s=s.constructor;while(s&&s.__super__)s.prototype&&_.has(s.prototype,t)&&i.push(s.prototype),s=s.__super__&&s.__super__.constructor}var o=i.length;while(o--)_.each(b(i[o],t,e),r)}function T(e,t,n,r){if(_.isObject(n)){var i=w[t];if(i&&i.event)return e&&e.listenTo&&e[t]&&e[t].cid?C(e,n,r,t):C(e["_"+t+"Events"],n,r),!0}}function N(e,t,n,r,i){function u(){if(e.el)s.apply(i,arguments);else{if(o)throw new Error("destroyed-event:"+e.name+":"+n);o++}}var s=ut(r,e),o=0;u._callback=s._callback||s,u._thoraxBind=!0,e.listenTo(t,n,u)}function C(e,t,n,r){function i(t,i){r?N(e,e[r],i,t,n||e):e.push([i,t,n])}_.each(t,function(e,t){_.isArray(e)?_.each(e,function(e){i(e,t)}):i(e,t)})}function k(e){e.tag&&(e.tagName=e.tag,delete e.tag),e["class"]&&(e.className=e["class"],delete e["class"])}function A(e){if(!L){var t="area,base,br,col,embed,hr,img,input,keygen,link,menuitem,meta,param,source,track,wbr";L={},_.each(t.split(","),function(e){L[e]=!0})}return L[e]}function O(e,t){return function(){if($(this).parent().view({el:!0,helper:!0})[0]===e.el)return t.call(this)}}function M(e){function n(){if(e)i(function(){var n=t.shift();n?n():e()});else{var n;while(n=t.shift())n()}}var t=[];return{exec:function(r){t.push(function(){r(),e&&n()})},chain:function(r){t.push(function(){e?r(n):r()})},run:function(){e&&!t.length?i(e):n()}}}function H(e,t,n){function r(e){for(var t=0;e&&t<i.length;t++)i[t]!==""&&i[t]!=="."&&i[t]!=="this"&&(e=e[i[t]]);return e}var i=n.split(".");return r(t)||r(e)}function B(e,t,n){if(_.isString(e)||_.isNumber(e)||_.isNull(e)||_.isBoolean(e))return e;if(t!=null&&t!==!0&&!/^\.\.\//.test(t)){var r=Handlebars.Utils.appendContextPath(n.contextPath,t);if(H(n.view,n.root,r)===e)return{$lut:r}}throw d("server-marshall-object")}function R(e,t){return function(n){var r=$(n.target).view({el:!0,helper:!1});if(r[0]===t.el)return n.originalContext=this,e(n)}}function U(e,t,n){t+=n.event.originalName;var r=n.handler,i=typeof r=="string"?e[r]:r;if(!i)throw new Error('Event "'+r+'" does not exist '+(e.name||e.cid)+":"+t);var s=n.context||e,o=l.bindSection("thorax-event",{view:s.name||s.cid,eventName:t},function(){return i.apply(s,arguments)});return o._callback=i,o._thoraxBind=!0,o}function z(e){if(e.type)return e;var t=q[e];if(t)return t;t=z[e]={type:"view",name:e,originalName:e,nested:!1,selector:undefined};var n=e.match(F);return n&&I[n[2]]&&(t.type="DOM",t.name=n[2],t.nested=!!n[1],t.selector=n[3]),t}function W(e,t,n,r){return{event:z(e),context:r,handler:typeof n=="string"?t[n]:n}}function K(e){while(e._helperName&&e._helperName!=="view")e=e.parent;return e}function Q(e,t){if(t["expand-tokens"])return delete t["expand-tokens"],_.each(t,function(n,r){t[r]=l.Util.expandToken(n,e)}),!0}function G(e,t,n,r){return{inverse:n.inverse,options:n.hash,declaringView:r,parent:K(r),_helperName:e,_helperOptions:{options:nt(n),args:_.clone(t)}}}function Y(e,t,n){t.fn?e.template=t.fn:n&&n.prototype&&!n.prototype.template&&(e.template=Handlebars.VM.noop)}function Z(e,t,n){var r;if(n.factory){r=n.factory(e,t);if(!r)return;r._helperName=t._helperName,r._helperOptions=t._helperOptions}else r=new n(t);if(!r.el)throw d("insert-destroyed-factory");return r}function et(e,t,n,r){var i=r.declaringView,s=r._helperName;e.push(t),i._addChild(t),i.trigger.apply(i,["helper",s].concat(e)),n&&n.apply(this,e)}function tt(e,t,n){this._pendingAppend=undefined;var r=this;(e||this.$el).find("["+X+"]").forEach(function(e){var i=$(e),s=i.attr(X),o=r.children[s];o&&n.chain(function(e){V[s]?(o.render(V[s],e),delete V[s]):o.ensureRendered(e),i.replaceWith(o.el)}),o&&t&&n.exec(function(){t(o.$el)})})}function nt(e){var t=_.pick(e,"fn","inverse","hash","data");return t.data=_.omit(e.data,"cid","view","yield","root","_parent"),t.fn=t.fn||undefined,t.inverse=t.inverse||undefined,t}function rt(e,t){function n(e,t){return _.every(e,function(e,n){return t[n]===e})}return e._helperName!==t._helperName?!1:(e=e._helperOptions,t=t._helperOptions,e.args.length===t.args.length&&n(e.args,t.args)&&_.isEqual(_.keys(e.options).sort(),_.keys(t.options).sort())&&_.every(e.options,function(r,i){if(i==="data"||i==="hash")return n(e.options[i],t.options[i]);if(i==="fn"||i==="inverse"){if(t.options[i]===r)return!0;var s=t.options[i]||{};return r&&_.has(r,"program")&&!r.depth&&s.program===r.program}return t.options[i]===r}))}function it(e,t){function n(n,r){var i=this[e],s=b(this,t.$el);if(n===i)return this;i&&this.unbindDataObject(i);if(n){this[e]=n,t.loading&&t.loading(this),this.bindDataObject(e,n,_.extend({},this.options,r));if(s){var o={};$serverSide&&t.idAttrName&&(o[t.idAttrName]=n.id),o[t.cidAttrName]=n.cid,s.attr(o)}n.trigger("set",n,i)}else this[e]=!1,t.change&&t.change(this,!1),s&&s.removeAttr(t.cidAttrName);return this.trigger("change:data-object",e,n,i),this}t=w[e]=_.defaults({name:"_"+e+"Events",event:!0},t),t.ctor=function(n){if(n[e]){var r=n[e];n[e]=null,n[t.set](r)}},l.View.prototype[t.set]=n}function st(e,t,n,r){x(r,"_"+t+"Events",!0,function(t){N(e,n,t[0],t[1],t[2]||e)})}function ot(e,t){e.load?e.load(function(){t&&t.success&&t.success(e)},t):e.fetch(t)}function ut(e,t){return _.isFunction(e)?e:t[e]}function lt(e,t,n){if(n&&n.serializing)return;var r=e.getObjectOptions(t)||{};e.conditionalRender(r.render)}function yt(e,t){var n=e.getObjectOptions(t)||undefined;e.shouldRender(n&&n.render)&&e.renderCollection&&e.renderCollection()}function bt(e,t){var n=e.getObjectOptions(t)||undefined;e.shouldRender(n&&n.render)&&e.ensureRendered()}function wt(e,t){var n=e._collectionElement;e.itemFilter&&n.find("["+at+'="'+t.cid+'"]')[Et(e,t)?"show":"hide"]()}function Et(e,t){return e.itemFilter.call(e,t,e.collection.indexOf(t))}function St(e){var t=e._collectionElement;e.emptyClass&&t.removeClass(e.emptyClass),t.removeAttr(vt),t.empty()}function xt(e){var t=e._collectionElement;e.emptyClass&&t.addClass(e.emptyClass),t.attr(vt,!0),e.appendEmpty()}function Nt(e,t,n){n=n||{},n.target=e,e.trigger(t,n),_.each(e.children,function(e){e.trigger(t,n)})}function Ct(e){e.$el.attr(Tt,e.cid),e._layoutViewEl=e.el}function kt(e){var t=e.$("["+Tt+'="'+e.cid+'"]')[0];!t&&e.$el.attr(Tt)&&(t=e.el);if(!t)throw new Error("No layout element found in "+(e.name||e.cid));e._layoutViewEl=t}function Lt(e){return function(t,n){this.parent.trigger(e,t,n)}}function Ot(e,t){var n=K(e);if(!e[t]){var r=n[t];r&&(e[t]=r)}}function _t(e,t){return _.each(e,function(n,r){if(_.isObject(n))return _t(n,t);t(n,r,e)===!1&&delete e[r]}),e}function Dt(){Bt(this),this.model&&this.model.previousAttributes&&this.model.set(this.model.previousAttributes(),{silent:!0})}function Pt(e,t,n){var r=0;$("select,input,textarea",t.root||e.el).each(function(){var i=$(this);if(!t.children&&e.el!==i.view({el:!0,helper:!1})[0])return;var s=i.attr("type"),o=i.attr("name");s!=="button"&&s!=="cancel"&&s!=="submit"&&o&&(n(i,r,o,s),++r)})}function Ht(e,t,n,r){var i,s=e,o=t.split("["),u=n.mode;for(var a=0;a<o.length-1;++a){i=o[a].replace("]","");if(!s[i]){if(u!=="serialize")return r(undefined,i);s[i]={}}s=s[i]}i=o[o.length-1].replace("]",""),r(s,i)}function Bt(e){e.$("form").removeAttr("data-submit-wait"),e.$el.removeAttr("data-submit-wait")}function jt(e){var t=e.getObjectOptions(e.model)||{};return t.populate===!0?{}:t.populate}function Rt(e){var t=$(this),n=t.view({helper:!1}),r=t.attr(Ft),i=t.attr(It),s=!1;r&&(s=n[r](e)),i&&n.trigger(i,e),this.tagName==="A"&&s===!1&&e.preventDefault()}function zt(){Wt(),Ut=l._fastClickEventName||"click",$(document).on(Ut,qt,Rt)}function Wt(){Ut&&$(document).off(Ut,qt,Rt)}function Vt(e,t){this._pendingElement=undefined;var n=this;(e||this.$el).find("["+Xt+"]").forEach(function(e){var r=$(e),i=r.attr(Xt),s=n._elementsByCid[i];_.isFunction(s)&&(s=s.call(n)),r.replaceWith(s),t&&t($(s))})}function Yt(e,t){function s(){n||(r=Backbone.history.getFragment(),i=n=!0);if(i&&r===Backbone.history.getFragment()){i=!1;return}e=undefined,u.cancel(),t&&t()}function o(){Backbone.history.off("route",s),e&&e.apply(this,arguments)}var n=Backbone.History.started,r=n&&Backbone.history.getFragment(),i=Qt!==r;Backbone.history.on("route",s);var u=_.bind(o,this);return u.cancel=function(){Backbone.history.off("route",s)},u}function Zt(e,t,n,r){if(e.isPopulated())return _.defer(t,e);arguments.length===2&&!_.isFunction(n)&&_.isObject(n)&&(r=n,n=!1);var i=e,s=!1,o=Yt(_.bind(t,i),function(){s=!0,u&&u.aborted(),i._request&&(!i.fetchQueue||!i.fetchQueue.length)&&(i._aborted=!0,i._request.abort()),n&&n.call(i,!1)}),u;e.fetch(_.defaults({success:o,error:function(){o.cancel(),!s&&n&&n.apply(i,[!0].concat(_.toArray(arguments)))}},r)),u=_.last(e.fetchQueue)}function en(e,t,n){if(t.resetQueue)e.fetchQueue=undefined;else if(e.fetchQueue){var r=(e.fetchQueue[0].options||{}).reset;if(r!==t.reset)throw new Error(p("mixed-fetch"))}if(!e.fetchQueue){e.fetchQueue=[];var i=_.defaults({success:tn(e,e.fetchQueue,"success"),error:tn(e,e.fetchQueue,"error"),complete:tn(e,e.fetchQueue,"complete")},t);if(!n)return i;var s=n.call(e,i);if(!e.fetchQueue)return;e.fetchQueue._promise=s}var o;$.Deferred&&e.fetchQueue._promise&&e.fetchQueue._promise.then&&(o=$.Deferred(),e.fetchQueue._promise.then(_.bind(o.resolve,o),_.bind(o.reject,o)));var u=e.fetchQueue;return e.fetchQueue.push({aborted:function(){var n=_.indexOf(u,this);n>=0&&(u.splice(n,1),!u.length&&u===e.fetchQueue&&(e.fetchQueue=undefined));var r=[u._promise,"abort"];o&&o.rejectWith(t.context,r),t.error&&t.error.apply(t.context,r),t.complete&&t.complete.apply(t.context,r)},options:t}),o?o.promise():e.fetchQueue._promise}function tn(e,t,n){return function(){var r=arguments;_.each(t,function(e){var t=e.options;t[n]&&t[n].apply(this,r)},this),e.fetchQueue===t&&(e.fetchQueue=undefined)}}function rn(){this.render()}function ln(){}function cn(){_.each(this._domEvents||[],function(e){var t=e.split(" "),n=t.slice(1).join(" ")||undefined;t[0]==="click"&&$(n||this.el,n&&this.el).forEach(function(e){var t=$(e).attr("data-tappable",!0);an&&!fn[e.tagName]&&t.on("click",ln)})},this)}var e=window._idCounter||0,t="";window._resetIdCounter=function(n){e=0,t=n||""},_.uniqueId=function(n){var r=t+ ++e;return n?n+r:r},window.$serverSide&&FruitLoops.onEmit(function(){$("body").append("<script>window._idCounter = "+e+";</script>")}),typeof $serverSide=="undefined"&&(window.$serverSide=!1);var n=!!navigator.userAgent.match(/Trident\/7\./),r=n||/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());$.fn.forEach||($.fn.forEach=function(e,t){$.fn.each.call(this,function(n){e.call(t||this,this,n)})});var i=window.setImmediate||function(e){setTimeout(e,0)},s="data-view-name",o="data-view-cid",u="data-view-helper",a="data-view-restore",f={};Handlebars.templates||(Handlebars.templates={});var l=this.Thorax={templatePathPrefix:"",Views:{},bindSection:function(e,t,n){return n||(n=t,t=undefined),l.onException?function(){try{return n.apply(this,arguments)}catch(r){l.onException(e,r,t)}}:n},runSection:function(e,t,n){return l.bindSection(e,t,n)()},onException:null,templates:Handlebars.templates};l.View=Backbone.View.extend({constructor:function(t){this._constructorArg=t;var n=Backbone.View.call(this,t);return this._constructorArg=undefined,_.each(w,function(e){e.ctor&&e.ctor(this,n)},this),n},toString:function(){return"[object View."+this.name+"]"},_configure:function(){},_ensureElement:function(){c(this);if(!$serverSide&&this.el){var e=$(_.result(this,"el"));if(e.length&&e.attr("data-view-restore")==="true")return this.restore(e)}return Backbone.View.prototype._ensureElement.call(this)},setElement:function(e,t){var n=$(e),r=n.attr("data-view-cid");r&&this._assignCid(r);var i=Backbone.View.prototype.setElement.call(this,n,t),o={"data-view-cid":this.cid};return this.name&&(o[s]=this.name),this.$el.attr(o),e.parentNode&&this.retain(),i},_assignCid:function(e){this.cid&&f[this.cid]&&(delete f[this.cid],f[e]=this),this.parent&&(delete this.parent.children[this.cid],this.parent.children[e]=this),this.cid=e},_addChild:function(e){return this.children[e.cid]?e:(e.retain(),this.children[e.cid]=e,e.parent&&e.parent!==this&&!e._helperOptions&&e.parent._removeChild(e),e.parent=this,this.trigger("child",e),e)},_removeChild:function(e){return delete this.children[e.cid],e.parent=null,e.release(),e},_destroy:function(){this.trigger("destroyed"),delete f[this.cid],this.stopListening(),this.off(),_.each(this.children,function(e){e.parent=null,e.release()}),this.el&&(this.undelegateEvents(),this.$el.remove(),P.destroy(this.$el)),this.el=this.$el=this.parent=this.children=this.model=this.collection=this._collection=this._boundDataObjectsByCid=this._objectOptionsByCid=this._helperOptions=undefined},restore:function(e,t){e=e[0]||e;if(this._renderCount){var n=this.$el.attr("data-view-cid");this.cid!==n&&this._assignCid(n),$(e).replaceWith(this.$el),this.trigger("restore:fail",{type:"previously-rendered",view:this,element:e});return}this.setElement(e);var r=this.$el.attr("data-view-restore")==="true";this.$el.removeAttr("data-view-restore");if(!$serverSide&&r){y(this,"template",{required:!1}),this._renderCount=1,this.trigger("restore",t);if(t)this.render();else{var i=this.$("[data-view-restore]"),s=_.filter(i,function(t){var n=$(t).parent();return!n.attr("data-layout-cid")&&n.view({el:!0,helper:!0})[0]===e});s.length&&(this.trigger("restore:fail",{type:"remaining",view:this,element:e,rerendered:s}),this.render())}return this.trigger("after-restore",t),!0}this.trigger("restore:fail",{type:"not-restorable",view:this,element:e}),this.render()},render:function(e,t){var n=this;return n.el?(l.runSection("thorax-render",{name:n.name},function(){if(n._rendering)throw d("nested-render");n._rendering=!0;var i=new M(t),s={},o=[];_.each(n.children,function(e,t){e._helperOptions?(e._cull=!0,o.push(e)):s[t]=e}),n.children=s,n._previousHelpers=o,n.trigger("before:rendered",i),i.exec(function(){_.isUndefined(e)||!_.isElement(e)&&!l.Util.is$(e)&&(!e||!e.el)&&!_.isString(e)&&!_.isFunction(e)?(y(n,"template",{required:!0}),e=n.renderTemplate(n.template)):_.isFunction(e)&&(e=n.renderTemplate(e))}),i.exec(function(){_.each(o,function(e){e._cull&&n._removeChild(e)}),n._previousHelpers=undefined,$serverSide?n.$el.attr(a)!=="false"&&n.$el.attr(a,$serverSide):n.$el.removeAttr(a)}),i.chain(function(t){n.html(e&&e.el||e&&e.string||e,t)}),i.exec(function(){++n._renderCount,n.trigger("rendered"),n._rendering=!1}),i.run()}),n):n},context:function(){return this.model&&this.model.attributes},_getContext:function(){var e=Object.create?Object.create(this):_.clone(this);return _.extend(e,this.context.call?this.context():this.context)},_getData:function(e){return{view:this,root:e,cid:_.uniqueId("t"),yield:function(){return e.fn&&e.fn(e)}}},renderTemplate:function(e,t,n){var r;return _.isFunction(e)?r=e:r=l.Util.getTemplate(e,n),!r||r===Handlebars.VM.noop?"":(t=t||this._getContext(),r(t,{helpers:this.helpers,data:this._getData(t)}))},ensureRendered:function(e){this._renderCount?e&&i(e):this.render(undefined,e)},shouldRender:function(e){return e||e==null&&this._renderCount},conditionalRender:function(e){this.shouldRender(e)&&this.render()},appendTo:function(e){this.ensureRendered(),$(e).append(this.el),this.trigger("ready",{target:this})},html:function(e,t){if(_.isUndefined(e))return this.$el.html();this.trigger("before:append");var n=this._replaceHTML(e);return this.triggerDeferrable("append",undefined,undefined,t),n},release:function(){--this._referenceCount,this._referenceCount<=0&&this._destroy()},retain:function(e){f[this.cid]||(f[this.cid]=this),++this._referenceCount,e&&this.listenTo(e,"destroyed",e.release)},_replaceHTML:function(e){if(this._renderCount&&(r||$.fn.jquery))while(this.el.hasChildNodes())this.el.removeChild(this.el.childNodes[0]);return this.$el.empty(),this.$el.append(e)},_anchorClick:function(e){var t=$(e.currentTarget),n=t.attr("href");return e.metaKey||e.shiftKey?!0:n&&(n[0]==="#"||n[0]==="/"&&n[1]!=="/")?(Backbone.history.navigate(n,{trigger:!0}),!1):!0}}),l.View.extend=function(){E(this);var e=Backbone.View.extend.apply(this,arguments);return e.__parent__=this,S(e),e},v(l.View,l.Views),$.fn.view=function(e){e=_.defaults(e||{},{helper:!0});var t="["+o+"]";e.helper||(t+=":not(["+u+"])");var n=$(this).closest(t);if(n){if(e.el)return n;var r=n.attr(o),i=f[r];if(!i)throw d("fn-view-unregistered");return i}return!1};var w={},L;l.Util={getViewInstance:function(e,t){var n=l.Util.getViewClass(e,!0);return n?new n(t||{}):e},getViewClass:function(e,t){return _.isString(e)?m(l,"Views",e,t):_.isFunction(e)?e:!1},getTemplate:function(e,t){if(_.isFunction(e))return e;var n=l.templatePathPrefix,r;n&&e.substr(0,n.length)!==n&&(e=n+e),e=e.replace(/\.handlebars$/,""),r=Handlebars.templates[e],r||(e+=".handlebars",r=Handlebars.templates[e]);if(!r&&!t)throw new Error("templates: "+e+" does not exist.");return r},is$:function(e){return _.isObject(e)&&"length"in e},expandToken:function(e,t,n){if(e&&e.indexOf&&e.indexOf("{{")>=0){var r=/(?:\{?[^{]+)|(?:\{\{([^}]+)\}\})/g,i,s=[];function o(e,t){if(e.match(/^("|')/)&&e.match(/("|')$/))return e.replace(/(^("|')|('|")$)/g,"");var r=e.split("."),i=r.length;for(var s=0;t&&s<i;s++)r[s]!=="this"&&(t=t[r[s]]);return n&&_.isString(t)?encodeURIComponent(t):t}while(i=r.exec(e))if(i[1]){var u=i[1].split(/\s+/);if(u.length>1){var a=u.shift();u=_.map(u,function(e){return o(e,t)}),Handlebars.helpers[a]?s.push(Handlebars.helpers[a].apply(t,u)):s.push(i[0])}else s.push(o(u[0],t))}else s.push(i[0]);e=s.join("")}return e},tag:function(e,t,n){var r=e.tagName||"div",i=A(r);if(i&&t)throw new Error(p("void-tag-content"));var s="<"+r+" "+_.map(e,function(e,t){if(e==null||t==="expand-tokens"||t==="tagName")return"";var r=e;return n&&(r=l.Util.expandToken(e,n)),(t==="className"?"class":t)+'="'+Handlebars.Utils.escapeExpression(r)+'"'}).join(" ")+">";return i?s:s+(t==null?"":t)+"</"+r+">"}},l.Util.Deferrable=M,l.View.prototype.triggerDeferrable=function(){var e=[],t=arguments.length-1,n=arguments[t];for(var r=0;r<t;r++)e.push(arguments[r]);var i=new M(n);e.push(i),this.trigger.apply(this,e),i.run()};var D=window._thoraxServerData||[],P=l.ServerMarshal={store:function(e,t,n,r,i){if(!$serverSide)return;r=r||{},i=i&&i.data||i||{};var s=e._serverData||parseInt(e.attr("data-server-data"),10);isNaN(s)&&(s=D.length,D[s]={},e._serverData=s,e.attr("data-server-data",s));var o=D[s];o[t]=undefined;if(_.isArray(n)&&!_.isString(r)&&!n.toJSON)n.length&&(o[t]=_.map(n,function(e,t){return B(e,r[t],i)}));else if(_.isObject(n)&&!_.isString(r)&&!n.toJSON){var u={},a;_.each(n,function(e,t){u[t]=B(e,r[t],i),a=!0}),a&&(o[t]=u)}else o[t]=B(n,r,i)},load:function(e,t,n,r){function o(e){return e&&e.$lut!=null?H(n,r,e.$lut):e}var i=parseInt(e.getAttribute("data-server-data"),0),s=D[i];if(!s)return;s=s[t];if(_.isArray(s))return _.map(s,o);if(!_.isFunction(s)&&_.isObject(s)&&s.$lut==null){var u={};return _.each(s,function(e,t){u[t]=o(e)}),u}return o(s)},serialize:function(){if($serverSide)return JSON.stringify(D)},destroy:function(e){var t=parseInt(e.attr("data-server-data"),10);if(!isNaN(t)){D[t]=undefined;var n=D.length;while(n--&&!D[n]);n<D.length-1&&(D.length=n+1)}},_reset:function(){D=[]}};$serverSide&&FruitLoops.onEmit(function(){$("body").append("<script>var _thoraxServerData = "+P.serialize()+";</script>")}),l.Mixins={},_.extend(l.View,{mixin:function(e){l.Mixins[e](this)},registerMixin:function(e,t,n){l.Mixins[e]=function(e){var r=!!e.cid;n&&_.extend(r?e:e.prototype,n),r?t.call(e):e.on("configure",t)}}}),l.View.prototype.mixin=function(e){l.Mixins[e](this)};var j=l.View.prototype.on,F=/^(nested\s+)?(\S+)(?:\s+(.+))?/,I={},q={};(function(e){_.each(e,function(e){I[e]=!0})})(["touchstart","touchmove","touchend","touchcancel","mouseenter","mouseleave","mousemove","mousedown","mouseup","mouseover","mouseout","keydown","keyup","keypress","contextmenu","click","dblclick","focusin","focusout","focus","blur","submit","input","change","dragstart","drag","dragenter","dragleave","dragover","drop","dragend","singleTap","doubleTap","longTap","swipe","swipeUp","swipeDown","swipeLeft","swipeRight"]),w.event={name:"_events",configure:function(e){x(e.constructor,"_events",!0,function(t){e.on.call(e,t[0],t[1])}),x(e,"events",!1,function(t,n){e.on(n,t,e)})}},_.extend(l.View,{on:function(e,t){return E(this),T(this,e,t)?this:(_.isObject(e)?_.each(e,function(e,t){this.on(t,e)},this):(e=z(e),_.isArray(t)?_.each(t,function(t){this._events.push([e,t])},this):this._events.push([e,t])),this)}}),_.extend(l.View.prototype,{on:function(e,t,n){var r=this;if(T(r,e,t,n))return r;if(_.isObject(e)&&!e.type&&arguments.length<3)_.each(e,function(e,n){r.on(n,e,t||r)});else{function i(t){var i=W(e,r,t,n||r);if(i.event.type==="DOM"){if($serverSide)return;r._eventsToDelegate||(r._eventsToDelegate=[]),r._eventsToDelegate.push(i)}(i.event.type!=="DOM"||r._eventsDelegated)&&r._addEvent(i)}_.isArray(t)?_.each(t,i):i(t)}return r},delegateEvents:function(e){this.undelegateEvents(),e&&(_.isFunction(e)&&(e=e.call(this)),this._eventsToDelegate=[],this.on(e)),_.each(this._eventsToDelegate,this._addEvent,this),this._eventsDelegated=!0},_addEvent:function(e){if(e.handler._thoraxBind)return j.call(this,e.event.name,e.handler,e.context||this);if($serverSide&&e.event.type!=="view")return;var t=U(this,e.event.type+"-event:",e);if(e.event.type==="view")e.context&&e.context!==this&&e.context instanceof l.View?N(e.context,this,e.event.name,t,e.context):j.call(this,e.event.name,t,e.context||this);else{e.event.nested||(t=R(t,this));var n=e.event.name+".delegateEvents"+this.cid;e.event.selector?this.$el.on(n,e.event.selector,t):this.$el.on(n,t)}}}),l.View.prototype.bind=l.View.prototype.on,l.View.on("ready",function(e){if(!this._isReady){this._isReady=!0;function t(t){t._isReady||t.trigger("ready",e)}_.each(this.children,t),this.on("child",t)}});var X="data-view-tmp",V={},J={_ensureElement:function(){l.View.prototype._ensureElement.call(this),this.$el.attr(u,this._helperName)},_getContext:function(){return this.parent._getContext()}};l.HelperView=l.View.extend(J),Handlebars.registerViewHelper=function(e,t,n){function s(e,t,n){try{P.store(e.$el,"args",t,n.ids,n),P.store(e.$el,"attrs",n.hash,n.hashIds,n);if(n.fn&&n.fn!==Handlebars.VM.noop){if(n.fn.depth)throw new Error;P.store(e.$el,"fn",n.fn.program)}if(n.inverse&&n.inverse!==Handlebars.VM.noop){if(n.inverse.depth)throw new Error;P.store(e.$el,"inverse",n.inverse.program)}}catch(r){e.$el.attr("data-view-restore","false"),e.trigger("restore:fail",{type:"serialize",view:e,err:r})}}arguments.length===2&&(t.factory?n=t.callback:(n=t,t=l.HelperView));var r=t.attributeWhiteList;Handlebars.registerHelper(e,function(){var i=[],o=arguments[arguments.length-1],u=o.data.view;for(var a=0,f=arguments.length-1;a<f;a++)i.push(arguments[a]);var c=Q(this,o.hash),h=G(e,i,o,u);Y(h,o,t),k(o.hash);var p=_.clone(o.hash);_.each(r,function(e,t){delete p[t],_.isUndefined(o.hash[t])||(h[e]=o.hash[t])}),p.tagName&&(h.tagName=p.tagName),h.attributes=function(){var e=t.prototype&&t.prototype.attributes||{};return _.isFunction(e)&&(e=e.call(this)),_.extend(e,_.omit(p,["tagName"])),e.className&&(e["class"]=e.className,delete e.className),e};var d=_.find(u._previousHelpers,function(e){return e._cull&&rt(h,e)});if(!d){d=Z(i,h,t);if(!d)return"";d.$el.attr("data-view-helper-restore",e),$serverSide&&d.$el.attr("data-view-restore")!=="false"&&s(d,i,o),et(i,d,n,h)}else{if(!d.el)throw new Error("insert-destroyed");u.children[d.cid]=d}return d._cull=!1,u._pendingAppend||(u._pendingAppend=!0,u.once("append",tt)),p[X]=d.cid,t.modifyHTMLAttributes&&t.modifyHTMLAttributes(p,d),new Handlebars.SafeString(l.Util.tag(p,"",c?this:null))});var i=Handlebars.helpers[e];return i.restore=function(i,s,o){var u=i.context(),a=P.load(s,"args",i,u)||[],f=P.load(s,"attrs",i,u)||{},l={hash:f,fn:P.load(s,"fn"),inverse:P.load(s,"inverse")};i.template._setup({helpers:this.helpers}),l.fn&&(l.fn=i.template._child(l.fn)),l.inverse&&(l.inverse=i.template._child(l.inverse));var c=G(e,a,l,i);Y(c,l,t),r&&_.each(r,function(e,t){_.isUndefined(f[t])||(c[e]=f[t])});var h=Z(a,c,t);if(!h)return;return h._assignCid(s.getAttribute("data-view-cid")),et(a,h,n,c),h.restore(s,o),h},i},l.View.on("restore",function(e){var t=this,n;t.$("[data-view-helper-restore][data-view-restore=true]").each(O(t,function(){var n=Handlebars.helpers[this.getAttribute("data-view-helper-restore")],r=n.restore(t,this,e);r&&t._addChild(r)}))}),_.extend(l.View.prototype,{getObjectOptions:function(e){return e&&this._objectOptionsByCid[e.cid]},bindDataObject:function(e,t,n){if(this._boundDataObjectsByCid[t.cid])return;this._boundDataObjectsByCid[t.cid]=t;var n=this._modifyDataObjectOptions(t,_.extend({},w[e].defaultOptions,n));this._objectOptionsByCid[t.cid]=n,st(this,e,t,this.constructor),st(this,e,t,this);var r=w[e];r.bindCallback&&r.bindCallback(this,t,n),t.shouldFetch&&t.shouldFetch(n)?ot(t,n):w[e].change&&w[e].change(this,t,n)},unbindDataObject:function(e){this.stopListening(e),delete this._boundDataObjectsByCid[e.cid],delete this._objectOptionsByCid[e.cid]},_modifyDataObjectOptions:function(e,t){return t}});var at="data-model-cid",ft="data-model-id";l.Model=Backbone.Model.extend({isEmpty:function(){return!this.isPopulated()},isPopulated:function(){var e=_.clone(this.attributes),t=b(this,"defaults")||{};for(var n in t){if(e[n]!=t[n])return!0;delete e[n]}var r=_.keys(e);return r.length>1||r.length===1&&r[0]!==this.idAttribute},shouldFetch:function(e){var t;try{t=b(this,"url")}catch(n){t=!1}return e.fetch&&!!t&&!this.isPopulated()}}),l.Models={},v(l.Model,l.Models),it("model",{set:"setModel",defaultOptions:{render:undefined,fetch:!0,success:!1,invalid:!0},change:lt,$el:"$el",idAttrName:ft,cidAttrName:at}),l.View.on({model:{invalid:function(e,t){this.getObjectOptions(e).invalid&&this.trigger("invalid",t,e)},error:function(e,t){this.trigger("error",t,e)},change:function(e,t){w.model.change(this,e,t)}}}),$.fn.model=function(e){var t=$(this),n=t.closest("["+at+"]"),r=n&&n.attr(at);if(r){var e=e||t.view();if(e&&e.model&&e.model.cid===r)return e.model||!1;var i=t.collection(e);if(i)return i.get(r)}return!1};var ct=Backbone.Collection.prototype.fetch,ht=Backbone.Collection.prototype.set,pt=l.View.prototype._replaceHTML,dt="data-collection-cid",vt="data-collection-empty",mt="data-collection-element",gt=1;l.Collection=Backbone.Collection.extend({model:l.Model||Backbone.Model,initialize:function(e,t){return this.cid=_.uniqueId("collection"),Backbone.Collection.prototype.initialize.call(this,e,t)},isEmpty:function(){return this.length>0?!1:this.length===0&&this.isPopulated()},isPopulated:function(){return this._fetched||this.length>0||!this.length&&!b(this,"url")},shouldFetch:function(e){return e.fetch&&!!b(this,"url")&&!this.isPopulated()},fetch:function(e){e=e||{};var t=e.success;return e.success=function(e,n,r){e._fetched=!0,t&&t(e,n,r)},ct.call(this,e)},set:function(e,t){return this._fetched=!!e,ht.call(this,e,t)}}),_.extend(l.View.prototype,{getCollectionViews:function(e){return _.filter(this.children,function(t){return t instanceof l.CollectionView?!e||t.collection===e:!1})},updateFilter:function(e){_.invoke(this.getCollectionViews(e),"updateFilter")}}),l.Collections={},v(l.Collection,l.Collections),it("collection",{set:"setCollection",bindCallback:bt,defaultOptions:{render:undefined,fetch:!0,success:!1,invalid:!0,change:!0},change:yt,$el:"getCollectionElement",cidAttrName:dt}),l.CollectionView=l.View.extend({_defaultTemplate:Handlebars.VM.noop,_collectionSelector:"["+mt+"]",_replaceHTML:function(e){if(!(this.collection&&this.getObjectOptions(this.collection)&&this._renderCount)){var r=pt.call(this,e);return this._lookupCollectionElement(),r}var t,n=this._collectionElement;t=pt.call(this,e),this._lookupCollectionElement(),n.attr("data-view-cid")||this._collectionElement.replaceWith(n)},render:function(e,t){if(!this.shouldRender()){var n=this;this.once("append",function(e,t,r){r.chain(function(e){n.renderCollection(e)})})}return l.View.prototype.render.call(this,e,t)},restore:function(e,t){this._forceRerender=t,l.View.prototype.restore.call(this,e)},restoreCollection:function(){var e=this,t=this.$el.children(),n=[],r=0;this._lookupCollectionElement(),this.$("["+ft+"]").each(O(e,function(){var i=this.getAttribute(ft),s=e.collection.get(i);s?(e.restoreItem(s,t.index(this),this,e._forceRerender),r++):n.push(this)}));var i;this.$("[data-view-empty]").each(O(e,function(){e.collection.length?i=!0:e.restoreEmpty(this,e._forceRerender)}));var s=r!==this.collection.length||n.length||i;if(s&&this.collection.isPopulated()){_.each(n,function(t){t.parentNode.removeChild(t),e.trigger("restore:fail",{type:"collection-remove",element:t})});if(i||!this.collection.length)this.renderCollection(),e.trigger("restore:fail",{type:i?"collection-empty-found":"collection-empty-missing"});else{var o=this._collectionElement;this.collection.each(function(t){o.find("["+at+'="'+t.cid+'"]').length||(e.appendItem(t),e.trigger("restore:fail",{type:"collection-missing",model:t}))})}}else if(s){this._pendingRestore=!0;return}this.trigger("restore:collection",this,this.el)},appendItem:function(e,t,n,r,i){if(!e)return;var s,o=this._collectionElement,u=this.collection,a=!n||n.filter==null||n.filter;t&&t.el&&(t=o.children().indexOf(t.el)+1),e.el||_.isString(e)?(s=e,e=!1):(t=t!=null?t:u.indexOf(e)||0,s=this.renderItem.call(this,e,t));if(s){s.cid&&(this._addChild(s),s.ensureRendered()),_.isString(s)&&!/^\s*</m.test(s)&&(s="<div>"+s+"</div>");var f=s.$el||$($.trim(s)).filter(function(){return this.nodeType===gt||this.type==="tag"});e&&f.attr({"data-model-id":e.id,"data-model-cid":e.cid});if(r)o.append(f);else{var l=t>0?u.at(t-1):!1;if(!l)o.prepend(f);else{var c=o.children("["+at+'="'+l.cid+'"]').last();c.after(f)}}this.triggerDeferrable("append",null,function(t){t.attr({"data-model-cid":e.cid,"data-model-id":e.id})},i),(!n||!n.silent)&&this.trigger("rendered:item",this,u,e,f,t),a&&wt(this,e)}return s},updateItem:function(e){var t=this._collectionElement,n=t.find("["+at+'="'+e.cid+'"]');if(n.attr(o))return;this.removeItem(n),this.appendItem(e)},removeItem:function(e){function i(e){var n=e.attr(o),r=t.children[n];r&&t._removeChild(r)}var t=this,n=e;if(e.cid){var r=this._collectionElement;n=r.find("["+at+'="'+e.cid+'"]')}return n.length?(n.find("["+o+"]").each(function(e,t){i($(t))}),i(n),n.detach(),!0):!1},renderCollection:function(e){var t=new M(e),n=this;n.collection?(n.collection.isEmpty()?t.exec(function(){xt(n)}):n._pendingRestore?(n._pendingRestore=!1,n.restoreCollection(n._forceRerender)):(t.exec(function(){St(n)}),_.each(n.collection.models,function(e,r){t.chain(function(t){n.appendItem(e,r,undefined,!0,t)})})),t.exec(function(){n.trigger("rendered:collection",n,n.collection)})):t.exec(function(){xt(n)}),t.run()},emptyClass:"empty",renderEmpty:function(){this.emptyView||g(this,"emptyView",{extension:"-empty"}),!this.emptyTemplate&&!this.emptyView&&y(this,"emptyTemplate",{extension:"-empty",required:!1});if(this.emptyView){var e={};return this.emptyTemplate&&(e.template=this.emptyTemplate),l.Util.getViewInstance(this.emptyView,e)}return this.emptyTemplate&&this.renderTemplate(this.emptyTemplate)},restoreEmpty:function(e,t){var n=this.renderEmpty();return n.restore(e,t),this._addChild(n),this.trigger("restore:empty",this,e),n},renderItem:function(e,t){this.itemView||g(this,"itemView",{extension:"-item",required:!1}),!this.itemTemplate&&!this.itemView&&y(this,"itemTemplate",{extension:"-item",required:!this.itemView});if(this.itemView){var n={model:e};return this.itemTemplate&&(n.template=this.itemTemplate),l.Util.getViewInstance(this.itemView,n)}return this.renderTemplate(this.itemTemplate,this.itemContext.call(this,e,t))},restoreItem:function(e,t,n,r){n.setAttribute(at,e.cid);if(this.itemView||this.renderItem!==l.CollectionView.prototype.renderItem){var i=this.renderItem(e,t);_.isString(i)||(i.restore(n,r),this._addChild(i))}this.trigger("restore:item",this,n)},itemContext:function(e){return e.attributes},appendEmpty:function(){var e=this._collectionElement;e.empty();var t=this.renderEmpty.call(this);t&&t.$el&&t.$el.attr("data-view-empty","true"),t&&this.appendItem(t,0,{silent:!0,filter:!1}),this.trigger("rendered:empty",this,this.collection)},getCollectionElement:function(){return this._collectionElement},_lookupCollectionElement:function(){var e=this.$(this._collectionSelector).filter(O(this,function(){return!0}));this._collectionElement=e.length?e:this.$el},updateFilter:function(){var e=this;e.itemFilter&&_.each(e.collection.models,function(t){wt(e,t)})}}),l.CollectionView.on({restore:"restoreCollection",collection:{reset:function(e){yt(this,e)},sort:function(e){yt(this,e)},change:function(e){var t=this.getObjectOptions(this.collection);t&&t.change&&this.updateItem(e),wt(this,e)},add:function(e){var t=this._collectionElement;if(t.length){this.collection.length===1&&St(this);var n=this.collection.indexOf(e);this.appendItem(e,n)}},remove:function(e){var t=this._collectionElement;this.removeItem(e),this.collection.length===0&&t.length&&xt(this)}}}),l.View.on({collection:{invalid:function(e,t){this.getObjectOptions(e).invalid&&this.trigger("invalid",t,e)},error:function(e,t){this.trigger("error",t,e)}}}),$.fn.collection=function(e){if(e&&e.collection)return e.collection;var t=$(this),n=t.closest("["+dt+"]"),r=n&&n.attr(dt);if(r){e=t.view();if(e)return e.collection}return!1};var Tt="data-layout-cid";l.LayoutView=l.View.extend({_defaultTemplate:Handlebars.VM.noop,render:function(e){var t=l.View.prototype.render.call(this,e);return this.template===Handlebars.VM.noop?Ct(this):kt(this),t},restore:function(e,t){this._forceRerender=t,l.View.prototype.restore.call(this,e)},setView:function(e,t){function f(){r&&(r.$el&&r.$el.detach(),Nt(r,"deactivated",t),o._removeChild(r))}function c(){if(!e)o._view=undefined;else if($serverSide&&!u)o._view=e,o._addChild(e),FruitLoops.emit();else{e.ensureRendered(),t.activating=e,Nt(o,"activated",t),e.trigger("activated",t),o._view=e;var n=o._layoutViewEl;o._view.appendTo(n),o._addChild(e)}}function h(){o.hasBeenSet=!0,o.trigger("change:view:end",e,r,t)}t=_.extend({scroll:!0},t),_.isString(e)&&(e=new(l.Util.registryGet(l,"Views",e,!1)));if(!$serverSide&&!this.hasBeenSet){var n=this.$("["+s+'="'+e.name+'"]')[0];n?e.restore(n,this._forceRerender):$(this._layoutViewEl).empty()}this.ensureRendered();var r=this._view,o=this,u=e&&$serverSide&&(t.serverRender||e.serverRender),a=t.async!==!1?t.async||u:!1;if(e===r)return!1;if(a&&e&&!e._renderCount){i(function(){e.ensureRendered(function(){o.setView(e,t)})});return}return this.trigger("change:view:start",e,r,t),t.transition?t.transition(e,r,c,f,h):(f(),c(),h()),e},getView:function(){return this._view}}),l.LayoutView.on("after-restore",function(){kt(this)}),Handlebars.registerHelper("layout-element",function(e){var t=e.data.view;if(!t.getView)throw new Error(p("layout-element-helper"));return e.hash[Tt]=t.cid,k(e.hash),new Handlebars.SafeString(l.Util.tag.call(this,e.hash,"",this))}),l.CollectionHelperView=l.CollectionView.extend({events:{"rendered:collection":Lt("rendered:collection"),"rendered:item":function(e,t,n,r,i){this.parent.trigger("rendered:item",e,t,n,r,i)},"rendered:empty":Lt("rendered:empty"),"restore:collection":Lt("restore:collection"),"restore:item":Lt("restore:item"),"restore:empty":Lt("restore:empty")},getCollectionElement:function(){return this.$el},constructor:function(e){var t=!0;e.options["item-template"]&&(e.itemTemplate=l.Util.getTemplate(e.options["item-template"])),e.options["empty-template"]&&(e.emptyTemplate=l.Util.getTemplate(e.options["empty-template"])),!e.itemTemplate&&e.template&&e.template!==Handlebars.VM.noop&&(e.itemTemplate=e.template,e.template=Handlebars.VM.noop,e.itemTemplate.depth&&(t=!1)),!e.emptyTemplate&&e.inverse&&e.inverse!==Handlebars.VM.noop&&(e.emptyTemplate=e.inverse,e.inverse=Handlebars.VM.noop,e.emptyTemplate.depth&&(t=!1));var n=_.isFunction(e.itemContext),r=_.isFunction(e.itemFilter),i=l.HelperView.call(this,e);return n?this.itemContext=_.bind(this.itemContext,this.parent):_.isString(this.itemContext)&&(this.itemContext=_.bind(this.parent[this.itemContext],this.parent)),r?this.itemFilter=_.bind(this.itemFilter,this.parent):_.isString(this.itemFilter)&&(this.itemFilter=_.bind(this.parent[this.itemFilter],this.parent)),this.parent.name&&(!this.emptyView&&!this.parent.renderEmpty&&(this.emptyView=l.Util.getViewClass(this.parent.name+"-empty",!0)),!this.emptyTemplate&&!this.parent.renderEmpty&&(this.emptyTemplate=l.Util.getTemplate(this.parent.name+"-empty",!0)),!this.itemView&&!this.parent.renderItem&&(this.itemView=l.Util.getViewClass(this.parent.name+"-item",!0)),!this.itemTemplate&&!this.parent.renderItem&&(this.itemTemplate=l.Util.getTemplate(this.parent.name+"-item",!!this.itemView))),$serverSide&&!t&&(this.$el.attr(a,"false"),this.trigger("restore:fail",{type:"serialize",view:this,err:"collection-depthed-query"})),i},setAsPrimaryCollectionHelper:function(){var e=this,t=e.parent;_.each(At,function(t){Ot(e,t)}),_.each(["itemFilter","itemContext","renderItem","renderEmpty"],function(n){t[n]&&(e[n]=function(e,r){return t[n](e,r)})})}}),_.extend(l.CollectionHelperView.prototype,J),l.CollectionHelperView.attributeWhiteList={"item-context":"itemContext","item-filter":"itemFilter","item-template":"itemTemplate","empty-template":"emptyTemplate","item-view":"itemView","empty-view":"emptyView","empty-class":"emptyClass"};var At=["itemTemplate","itemView","emptyTemplate","emptyView"];Handlebars.registerViewHelper("collection",l.CollectionHelperView,function(e,t){arguments.length===1&&(t=e,e=t.parent.collection,e&&t.setAsPrimaryCollectionHelper(),t.$el.attr(mt,"true"),t.listenTo(t.parent,"change:data-object",function(e,n){e==="collection"&&(t.setAsPrimaryCollectionHelper(),t.setCollection(n))})),e&&t.setCollection(e)}),Handlebars.registerHelper("collection-element",function(e){if(!e.data.view.renderCollection)throw new Error(p("collection-element-helper"));var t=e.hash;return k(t),t.tagName=t.tagName||"div",t[mt]=!0,new Handlebars.SafeString(l.Util.tag.call(this,t,"",this))}),Handlebars.registerHelper("empty",function(e,t){arguments.length===1&&(t=e);var n=t.data.view;return arguments.length===1&&(e=n.model),n._emptyListeners||(n._emptyListeners={}),e&&!n._emptyListeners[e.cid]&&e.models&&"length"in e&&(n._emptyListeners[e.cid]=!0,n.listenTo(e,"remove",function(){e.length===0&&n.render()}),n.listenTo(e,"add",function(){e.length===1&&n.render()}),n.listenTo(e,"reset",function(){n.render()})),!e||e.isEmpty()?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("template",function(e,t){var n=!1;for(var r in t.hash){n=!0;break}var i=this;if(t.fn||n)i=Object.create?Object.create(this):_.clone(this),_.extend(i,{fn:t.fn},t.hash);var s=t.data.view.renderTemplate(e,i);return new Handlebars.SafeString(s)}),Handlebars.registerHelper("yield",function(e){return e.data.yield()}),Handlebars.registerHelper("url",function(e,t){var n=e||"",r="";if(arguments.length>2)for(var i=0,s=arguments.length-1;i<s;i++)r+=(i?"/":"")+encodeURIComponent(arguments[i]);else{var o=t&&t.hash||t;o&&o["expand-tokens"]?r=l.Util.expandToken(n,this,!0):r=n}if(Backbone.history._hasPushState){var u=Backbone.history.options.root;return u==="/"&&r.substr(0,1)==="/"?r:u+r}return"#"+r}),Handlebars.registerViewHelper("view",{factory:function(e,t){var n=e.length>=1?e[0]:l.View;return l.Util.getViewInstance(n,t.options)},modifyHTMLAttributes:function(e,t){e.tagName=(t.el.tagName||t.el.name||"").toLowerCase()},callback:function(e){var t=arguments[arguments.length-1],n=t._helperOptions.options,r=t.cid;if(!_.isString(e)&&n.hash&&_.keys(n.hash).length>0)throw new Error(p("view-helper-hash-args"));n.fn&&(V[r]=n.fn)}}),w.model.defaultOptions.populate=!0;var Mt=w.model.change;w.model.change=function(e,t,n){e._isChanging=!0,Mt.apply(e,arguments),e._isChanging=!1;if(n&&n.serializing)return;var r=jt(e);e._renderCount&&r&&e.populate(!r.context&&e.model.attributes,r)},_.extend(l.View.prototype,{serialize:function(){var e,t,n;for(var r=0;r<arguments.length;++r)_.isFunction(arguments[r])?e=arguments[r]:_.isObject(arguments[r])&&("stopPropagation"in arguments[r]&&"preventDefault"in arguments[r]?n=arguments[r]:t=arguments[r]);if(n&&!this._preventDuplicateSubmission(n))return;t=_.extend({set:!0,validate:!0,children:!0},t||{});var i=t.attributes||{},s=this,o=[];Pt(this,t,function(e,t,n,r){var o=s._getInputValue(e,r);_.isUndefined(o)||Ht(i,n,{mode:"serialize"},function(e,t){e[t]?_.isArray(e[t])?e[t].push(o):e[t]=[e[t],o]:e[t]=o})}),t._silent||this.trigger("serialize",i,t);if(t.validate){var u=this.validateInput(i);u&&u.length&&(o=o.concat(u)),this.trigger("validate",i,o,t);if(o.length){this.trigger("invalid",o);return}}if(t.set&&this.model&&!this.model.set(i,{silent:t.silent,serializing:!0}))return!1;var a=this;return e&&e.call(this,i,function(){Bt(a)}),i},_preventDuplicateSubmission:function(e,t){e.preventDefault();var n=$(e.target);return(e.target.tagName||"").toLowerCase()!=="form"&&(n=$(e.target).closest("form")),n.attr("data-submit-wait")?!1:(n.attr("data-submit-wait","true"),t&&t.call(this,e),!0)},populate:function(e,t){t=_.extend({children:!0},t||{});var n,e=e||this._getContext();Pt(this,t,function(t,r,i,s){Ht(e,i,{mode:"populate"},function(e,r){n=e&&e[r];if(!_.isUndefined(n)){var i=s==="checkbox"||s==="radio";i?(n=_.isBoolean(n)?n:n===t.val(),t[n?"attr":"removeAttr"]("checked","checked")):t.val(n)}})}),++this._populateCount,t._silent||this.trigger("populate",e)},validateInput:function(){},_getInputValue:function(e,t){if(t!=="checkbox"&&t!=="radio")return e.val()||"";var n=e[e.prop?"prop":"attr"]("checked");if(n||n===""){var r=e.attr("value");return r==="on"||r||!0}},_populateCount:0}),l.View.on({"before:rendered":function(){if(!this._renderCount||(this.model&&this.model.cid)!==this._formModelCid)return;var e=this.getObjectOptions(this.model);this.previousFormData=_t(this.serialize(_.extend({set:!1,validate:!1,_silent:!0},e)),function(e){return e!==""&&e!=null})},rendered:function(){var e=jt(this);e&&!this._isChanging&&!this._populateCount&&this.populate(!e.context&&this.model.attributes,e),this.previousFormData&&this.populate(this.previousFormData,_.extend({_silent:!0},e)),this._formModelCid=this.model&&this.model.cid,this.previousFormData=null}}),$serverSide||l.View.on({invalid:Dt,error:Dt,deactivated:function(){this.$el&&Bt(this)}});var Ft="data-call-method",It="data-trigger-event";Handlebars.registerHelper("button",function(e,t){arguments.length===1&&(t=e,e=t.hash.method);var n=t.hash,r=n["expand-tokens"];delete n["expand-tokens"];if(!e&&!t.hash.trigger)throw new Error(p("button-trigger"));return k(n),n.tagName=n.tagName||"button",n.trigger&&(n[It]=n.trigger),delete n.trigger,e&&(n[Ft]=e),new Handlebars.SafeString(l.Util.tag(n,t.fn?t.fn(this):"",r?this:null))}),Handlebars.registerHelper("link",function(){var e=_.toArray(arguments),t=e.pop(),n=t.hash,r=e.length===0?[n.href]:e,i=n["expand-tokens"];delete n["expand-tokens"];if(!r[0]&&r[0]!=="")throw new Error(p("link-href"));return k(n),r.push(t),n.href=Handlebars.helpers.url.apply(this,r),n.tagName=n.tagName||"a",n.trigger&&(n[It]=t.hash.trigger),delete n.trigger,n[Ft]="_anchorClick",new Handlebars.SafeString(l.Util.tag(n,t.fn?t.fn(this):"",i?this:null))});var qt="["+Ft+"], ["+It+"]",Ut;$(document).ready(function(){l._fastClickEventName||zt()});var Xt="data-element-tmp";Handlebars.registerHelper("element",function(e,t){k(t.hash);var n=_.uniqueId("element"),r=t.data.view;return t.hash[Xt]=n,r._elementsByCid||(r._elementsByCid={}),r._elementsByCid[n]=e,r._pendingElement||(r._pendingElement=!0,r.once("append",Vt)),new Handlebars.SafeString(l.Util.tag(t.hash))}),Handlebars.registerHelper("super",function(e){var t=e.data.view,n=t.constructor&&t.constructor.__super__;if(n){var r=n.template;if(!r){if(!n.name)throw new Error(p("super-parent"));r=n.name}return _.isString(r)&&(r=l.Util.getTemplate(r,!1)),new Handlebars.SafeString(r(this,e))}return""});var $t="load:start",Jt="load:end",Kt;l.setRootObject=function(e){Kt=e},l.loadHandler=function(e,t,n){var r=_.uniqueId("load");return function(i,s,o){function f(){if(a.timeout&&!a.run)return;var t=u._loadingTimeoutDuration!==undefined?u._loadingTimeoutDuration:l.View.prototype._loadingTimeoutDuration;a.timeout=setTimeout(l.bindSection("load-start",function(){a.events.length&&(a.run=!0,e.call(u,a.message,a.background,a))}),t*1e3)}if($serverSide)return;var u=n||this;u._loadInfo=u._loadInfo||{};var a=u._loadInfo[r];a?(clearTimeout(a.endTimeout),a.message=i,!s&&a.background&&(a.background=!1,f())):(a=u._loadInfo[r]=_.extend({isLoading:function(){return a.events.length},cid:r,events:[],timeout:0,message:i,background:!!s},Backbone.Events),f());if(_.indexOf(a.events,o)>=0)return;a.events.push(o);var c=function(){var e=u._loadingTimeoutEndDuration;e===void 0&&(e=l.View.prototype._loadingTimeoutEndDuration);var n=a.events,i=_.indexOf(n,o);i>=0&&!o.isLoading()&&(n.splice(i,1),_.indexOf(n,o)<0&&o.off(Jt,c)),n.length||(clearTimeout(a.endTimeout),a.endTimeout=setTimeout(l.bindSection("load-end",function(){n.length||(a.run&&(t&&t.call(u,a.background,a),a.trigger(Jt,a)),clearTimeout(a.timeout),a=u._loadInfo[r]=undefined)}),e*1e3))};o.on(Jt,c)}},l.forwardLoadEvents=function(e,t,n){function r(i,s,o){n&&e.off($t,r),t.trigger($t,i,s,o)}return e.on($t,r),{off:function(){e.off($t,r)}}},l.mixinLoadable=function(e,t){_.extend(e,{_loadingClassName:"loading",_loadingTimeoutDuration:.33,_loadingTimeoutEndDuration:.1,onLoadStart:function(e,n,r){var i=t?this.parent:this;if(!i||!i.el)return;!i.nonBlockingLoad&&!n&&Kt&&Kt!==this&&Kt.trigger($t,e,n,r),i._isLoading=!0,i.$el.addClass(i._loadingClassName),i.trigger("change:load-state","start",n)},onLoadEnd:function(){var e=t?this.parent:this;if(!e||!e.el)return;e._isLoading=!1,e.$el.removeClass(e._loadingClassName),e.trigger("change:load-state","end")}})},l.mixinLoadableEvents=function(e,t){_.extend(e,{_loadCount:0,isLoading:function(){return this._loadCount>0},loadStart:function(e,n){this._loadCount++;var r=t?this.parent:this;r.trigger($t,e,n,r)},loadEnd:function(){this._loadCount--;var e=t?this.parent:this;e.trigger(Jt,e)}})},l.mixinLoadable(l.View.prototype),l.mixinLoadableEvents(l.View.prototype),l.HelperView&&(l.mixinLoadable(l.HelperView.prototype,!0),l.mixinLoadableEvents(l.HelperView.prototype,!0)),l.CollectionHelperView&&(l.mixinLoadable(l.CollectionHelperView.prototype,!0),l.mixinLoadableEvents(l.CollectionHelperView.prototype,!0)),l.sync=function(e,t,n){var r=this,i=n.complete;return n.complete=function(){r._request=undefined,r._aborted=!1,i&&i.apply(this,arguments)},this._request=Backbone.sync.apply(this,arguments),this._request};var Qt,Gt=Backbone.History.prototype.loadUrl;Backbone.History.prototype.loadUrl=function(){return Backbone.history.once("route",function(){Qt=Backbone.history.getFragment()}),Qt=!1,Gt.apply(this,arguments)};var nn=[];l.Model&&nn.push(l.Model),l.Collection&&nn.push(l.Collection),_.each(nn,function(e){var t=e.prototype.fetch;l.mixinLoadableEvents(e.prototype,!1),_.extend(e.prototype,{sync:l.sync,fetch:function(n){n=n||{},e===l.Collection&&(_.find(["reset","remove","add","update"],function(e){return!_.isUndefined(n[e])})||(n.reset=!0));if(!n.loadTriggered){var r=this;function i(e){var t=n[e];n[e]=function(){r.loadEnd(),t&&t.apply(this,arguments)}}i("success"),i("error"),r.loadStart(undefined,n.background)}return en(this,n||{},t)},load:function(e,t,n){arguments.length===2&&!_.isFunction(t)&&(n=t,t=!1),n=n||{},!n.background&&!this.isPopulated()&&Kt&&(this.isLoading()?Kt.trigger($t,n.message,n.background,this):l.forwardLoadEvents(this,Kt,!0)),Zt(this,e,t,n)}})}),l.Util.bindToRoute=Yt,l.View.prototype._modifyDataObjectOptions=function(e,t){return t.ignoreErrors=this.ignoreFetchError,t.background=this.nonBlockingLoad,t},l.HelperView.prototype._modifyDataObjectOptions=l.CollectionHelperView.prototype._modifyDataObjectOptions=function(e,t){return t.ignoreErrors=this.parent.ignoreFetchError,t.background=this.parent.nonBlockingLoad,t},w.collection.loading=function(e){var t=e.loadingView,n=e.loadingTemplate,r=e.loadingPlacement;if(t||n){var i=l.loadHandler(function(){var i;e.collection.length===0&&e.$el.empty();if(t){var s=l.Util.getViewInstance(t);e._addChild(s),n?s.render(n):s.render(),i=s}else i=e.renderTemplate(n);var o=r?r.call(e):e.collection.length;e.appendItem(i,o),e.$el.children().eq(o).attr("data-loading-element",e.collection.cid)},function(){e.$el.find('[data-loading-element="'+e.collection.cid+'"]').remove()},e.collection);e.listenTo(e.collection,"load:start",i)}},l.CollectionHelperView&&_.extend(l.CollectionHelperView.attributeWhiteList,{"loading-template":"loadingTemplate","loading-view":"loadingView","loading-placement":"loadingPlacement"}),l.View.on({"load:start":l.loadHandler(function(e,t,n){this.onLoadStart(e,t,n)},function(e,t){this.onLoadEnd(t)}),collection:{"load:start":function(e,t,n){this.trigger($t,e,t,n)}},model:{"load:start":function(e,t,n){this.trigger($t,e,t,n)}}}),Handlebars.registerHelper("loading",function(e){var t=e.data.view;return t.off("change:load-state",rn,t),t.on("change:load-state",rn,t),t._isLoading?e.fn(this):e.inverse(this)});var sn=navigator.userAgent.match(/(iPhone|iPod|iPad)/i),on=navigator.userAgent.toLowerCase().indexOf("android")>-1?1:0,un=on?1:0;l.Util.scrollTo=function(e,t){function n(){window.scrollTo(e,t)}return t=t||un,sn?_.defer(n):n(),[e,t]},l.LayoutView.on("change:view:end",function(e,t,n){n&&n.scroll&&l.Util.scrollTo(0,0)}),l.Util.scrollToTop=function(){return this.scrollTo(0,0)},l.View.on({"submit form":function(){var e=$(":focus")[0];e&&e.blur()}}),$.fn.tapHoldAndEnd=function(e,t,n){return this.each(function(){function o(){clearTimeout(i),r&&s&&n(s),s=undefined,r=!1}var r,i,s;$(this).on("touchstart",e,function(e){if($(e.currentTarget).attr("data-no-tap-highlight"))return;o(),s=e.currentTarget,i=setTimeout(function(){r=!0,t(s)},50)}).on("touchmove touchend",o),$(document).on("touchcancel",o)})};var an=!on;l.configureTapHighlight=function(e,t){an=e,t=t||"tap-highlight";if(!e){function n(e){var n=e&&e.tagName.toLowerCase();if(n==="input"||n==="select"||n==="textarea")e=$(e).closest("[data-tappable=true]")[0]||e;if(e)return $(e).addClass(t),!1}function r(){$("."+t).removeClass(t)}$(document.body).tapHoldAndEnd("[data-tappable=true], a, input, button, select, textarea",n,r)}};var fn={A:!0,INPUT:!0,BUTTON:!0,SELECT:!0,TEXTAREA:!0};l.View.on({rendered:cn,"rendered:collection":cn,"rendered:item":cn,"rendered:empty":cn});var hn=l.View.prototype._addEvent;l.View.prototype._addEvent=function(e){return this._domEvents=this._domEvents||[],e.type==="DOM"&&this._domEvents.push(e.originalName),hn.call(this,e)}}()